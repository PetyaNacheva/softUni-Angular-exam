{"ast":null,"code":"import { MessageType } from '../message-bus.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/auth.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"../message-bus.service\";\nimport * as i4 from \"@angular/common\";\nfunction HeaderComponent_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"ul\")(2, \"li\")(3, \"a\", 10);\n    i0.ɵɵtext(4, \"Login\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(5, \"li\")(6, \"a\", 11);\n    i0.ɵɵtext(7, \"Register\");\n    i0.ɵɵelementEnd()()()();\n  }\n}\nfunction HeaderComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r4 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 9)(1, \"ul\")(2, \"li\")(3, \"a\", 12);\n    i0.ɵɵtext(4);\n    i0.ɵɵpipe(5, \"async\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"li\")(7, \"a\", 13);\n    i0.ɵɵlistener(\"click\", function HeaderComponent_div_8_Template_a_click_7_listener() {\n      i0.ɵɵrestoreView(_r4);\n      const ctx_r3 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r3.logoutHandler());\n    });\n    i0.ɵɵtext(8, \"Logout\");\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind1(5, 1, ctx_r1.currentUser$).username, \"'s Profile\");\n  }\n}\nconst _c0 = function (a0, a1) {\n  return {\n    \"error-message\": a0,\n    \"success-message\": a1\n  };\n};\nfunction HeaderComponent_p_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"ngClass\", i0.ɵɵpureFunction2(2, _c0, ctx_r2.isMessageError, !ctx_r2.isMessageError));\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\" \", ctx_r2.message, \" \");\n  }\n}\nexport class HeaderComponent {\n  constructor(authService, router, messageBus) {\n    this.authService = authService;\n    this.router = router;\n    this.messageBus = messageBus;\n    this.currentUser$ = this.authService.currentUser$;\n    this.isLoggedIn$ = this.authService.isLoggedIn$;\n    this.isLoggingOut = false;\n  }\n  ngOnInit() {\n    this.subscription = this.messageBus.onNewMessage$.subscribe(newMessage => {\n      //console.log('onNewMessage$.subscribe', newMessage);\n      this.message = (newMessage === null || newMessage === void 0 ? void 0 : newMessage.text) || '';\n      this.isMessageError = (newMessage === null || newMessage === void 0 ? void 0 : newMessage.type) === MessageType.Error;\n      if (this.message) {\n        setTimeout(() => {\n          this.messageBus.clear();\n        }, 5000);\n      }\n    });\n  }\n  ngOnDestroy() {\n    this.subscription.unsubscribe();\n  }\n  logoutHandler() {\n    if (this.isLoggingOut) {\n      return;\n    }\n    this.isLoggingOut = true;\n    //console.log('logout called');\n    this.authService.logout$().subscribe({\n      next: args => {\n        //console.log(args);\n      },\n      complete: () => {\n        this.isLoggingOut = false;\n        this.router.navigate(['/home']);\n        this.messageBus.notifyForMessage({\n          text: 'User logged out!',\n          type: MessageType.Success\n        });\n      },\n      error: () => {\n        this.isLoggingOut = false;\n      }\n    });\n  }\n}\nHeaderComponent.ɵfac = function HeaderComponent_Factory(t) {\n  return new (t || HeaderComponent)(i0.ɵɵdirectiveInject(i1.AuthService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MessageBusService));\n};\nHeaderComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: HeaderComponent,\n  selectors: [[\"app-header\"]],\n  decls: 25,\n  vars: 7,\n  consts: [[1, \"mini-navbar-wrap\"], [1, \"logo-wrap\"], [1, \"logo\"], [\"class\", \"mini-navbar\", 4, \"ngIf\"], [\"class\", \"notification\", 3, \"ngClass\", 4, \"ngIf\"], [\"routerLink\", \"/home\"], [\"routerLink\", \"/movies\"], [\"routerLink\", \"/movies/new\"], [\"routerLink\", \"/about\"], [1, \"mini-navbar\"], [\"routerLink\", \"/user/login\"], [\"routerLink\", \"/user/register\"], [\"routerLink\", \"/profile\"], [\"href\", \"javascript:void(0);\", 3, \"click\"], [1, \"notification\", 3, \"ngClass\"]],\n  template: function HeaderComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"header\")(1, \"div\", 0)(2, \"div\", 1)(3, \"p\", 2)(4, \"span\", 2);\n      i0.ɵɵtext(5, \"The Movie Universe\");\n      i0.ɵɵelementEnd()()();\n      i0.ɵɵtemplate(6, HeaderComponent_div_6_Template, 8, 0, \"div\", 3);\n      i0.ɵɵpipe(7, \"async\");\n      i0.ɵɵtemplate(8, HeaderComponent_div_8_Template, 9, 3, \"div\", 3);\n      i0.ɵɵpipe(9, \"async\");\n      i0.ɵɵtemplate(10, HeaderComponent_p_10_Template, 2, 5, \"p\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(11, \"nav\")(12, \"ul\")(13, \"li\")(14, \"a\", 5);\n      i0.ɵɵtext(15, \"Home\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(16, \"li\")(17, \"a\", 6);\n      i0.ɵɵtext(18, \"Movies\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(19, \"li\")(20, \"a\", 7);\n      i0.ɵɵtext(21, \"Add movie\");\n      i0.ɵɵelementEnd()();\n      i0.ɵɵelementStart(22, \"li\")(23, \"a\", 8);\n      i0.ɵɵtext(24, \"About us\");\n      i0.ɵɵelementEnd()()()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(7, 3, ctx.isLoggedIn$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(9, 5, ctx.isLoggedIn$));\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", ctx.message);\n    }\n  },\n  dependencies: [i4.NgClass, i4.NgIf, i2.RouterLink, i4.AsyncPipe],\n  styles: [\"header[_ngcontent-%COMP%] {\\n  background: rgb(22, 43, 42);  \\n  ;\\n}\\n\\nheader[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n  padding: 0;\\n  display: flex;\\n  align-items: center;\\n  width: 75%;\\n  margin: auto;\\n}\\n\\nheader[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   span[_ngcontent-%COMP%] {\\n  color: white;\\n  padding: 0.5em;\\n}\\n\\n.mini-navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n  border: 1px solid #3f4041;\\n  border-radius: 0.3em;\\n  padding-left: 0;\\n  width: 100%;\\n}\\n\\nheader[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] {\\n  list-style: none;\\n  margin: .35em;\\n  padding: 0 .95em;\\n}\\n\\nheader[_ngcontent-%COMP%]   a[_ngcontent-%COMP%] {\\n  text-decoration: none;\\n  color: white;\\n  cursor: pointer;\\n}\\n\\nnav[_ngcontent-%COMP%] {\\n  border-top: 1px solid #383838;\\n  \\n}\\nnav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n  display: flex;\\n  justify-content: space-between;\\n}\\n\\n.logo[_ngcontent-%COMP%] {\\n  font-size: 1.3em;\\n  color: white;\\n  padding-bottom: 0;\\n}\\n\\n.logo-wrap[_ngcontent-%COMP%] {\\n  font-family: 'Bad script', cursive;\\n  letter-spacing: .5em;\\n  margin: 0.5em 0;\\n}\\n\\n.mini-navbar-wrap[_ngcontent-%COMP%] {\\n  display: flex;\\n  flex-direction: row;\\n  justify-content: space-between;\\n  align-items: center;\\n  width: 75%;\\n  margin: auto;\\n}\\n\\n\\n\\n.mini-navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%] {\\n  background-color: #c3c6c7;\\n  border-radius: 5px;\\n}\\n\\n.mini-navbar[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%] + li[_ngcontent-%COMP%] {\\n  border-left: 1px solid lightgrey;\\n  padding-left: .5em;\\n}\\n\\n.notification[_ngcontent-%COMP%] {\\n  position: fixed;\\n  z-index: 10;\\n  right: 8%;\\n  top: 8%;\\n  padding: 0.5rem;\\n  border-radius: 0.5rem;\\n  color: rgb(255, 255, 255);\\n  font-style: italic;\\n  text-decoration: underline;\\n  box-shadow: 0 5px 10px rgb(204, 204, 204);\\n  background-color: rgba(238, 74, 74, 0.699);\\n}\\n\\n.error-message[_ngcontent-%COMP%] {\\n  background-color: rgba(238, 74, 74, 0.699);\\n}\\n\\n.success-message[_ngcontent-%COMP%] {\\n  background-color: rgba(99, 230, 81, 0.699);\\n}\\n/*# sourceURL=webpack://./src/app/core/header/header.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvY29yZS9oZWFkZXIvaGVhZGVyLmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsWUFBWTs7QUFFWjtFQUNFLDJCQUEyQjs7QUFFN0I7O0FBRUE7RUFDRSxVQUFVO0VBQ1YsYUFBYTtFQUNiLG1CQUFtQjtFQUNuQixVQUFVO0VBQ1YsWUFBWTtBQUNkOztBQUVBO0VBQ0UsWUFBWTtFQUNaLGNBQWM7QUFDaEI7O0FBRUE7RUFDRSx5QkFBeUI7RUFDekIsb0JBQW9CO0VBQ3BCLGVBQWU7RUFDZixXQUFXO0FBQ2I7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsYUFBYTtFQUNiLGdCQUFnQjtBQUNsQjs7QUFFQTtFQUNFLHFCQUFxQjtFQUNyQixZQUFZO0VBQ1osZUFBZTtBQUNqQjs7QUFFQTtFQUNFLDZCQUE2Qjs7QUFFL0I7QUFDQTtFQUNFLGFBQWE7RUFDYiw4QkFBOEI7QUFDaEM7O0FBRUE7RUFDRSxnQkFBZ0I7RUFDaEIsWUFBWTtFQUNaLGlCQUFpQjtBQUNuQjs7QUFFQTtFQUNFLGtDQUFrQztFQUNsQyxvQkFBb0I7RUFDcEIsZUFBZTtBQUNqQjs7QUFFQTtFQUNFLGFBQWE7RUFDYixtQkFBbUI7RUFDbkIsOEJBQThCO0VBQzlCLG1CQUFtQjtFQUNuQixVQUFVO0VBQ1YsWUFBWTtBQUNkOztBQUVBLGdCQUFnQjs7QUFFaEI7RUFDRSx5QkFBeUI7RUFDekIsa0JBQWtCO0FBQ3BCOztBQUVBO0VBQ0UsZ0NBQWdDO0VBQ2hDLGtCQUFrQjtBQUNwQjs7QUFFQTtFQUNFLGVBQWU7RUFDZixXQUFXO0VBQ1gsU0FBUztFQUNULE9BQU87RUFDUCxlQUFlO0VBQ2YscUJBQXFCO0VBQ3JCLHlCQUF5QjtFQUN6QixrQkFBa0I7RUFDbEIsMEJBQTBCO0VBQzFCLHlDQUF5QztFQUN6QywwQ0FBMEM7QUFDNUM7O0FBRUE7RUFDRSwwQ0FBMEM7QUFDNUM7O0FBRUE7RUFDRSwwQ0FBMEM7QUFDNUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBoZWFkZXIgICovXG5cbmhlYWRlciB7XG4gIGJhY2tncm91bmQ6IHJnYigyMiwgNDMsIDQyKTsgIFxuICA7XG59XG5cbmhlYWRlciB1bCB7XG4gIHBhZGRpbmc6IDA7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIGFsaWduLWl0ZW1zOiBjZW50ZXI7XG4gIHdpZHRoOiA3NSU7XG4gIG1hcmdpbjogYXV0bztcbn1cblxuaGVhZGVyIHVsIHNwYW4ge1xuICBjb2xvcjogd2hpdGU7XG4gIHBhZGRpbmc6IDAuNWVtO1xufVxuXG4ubWluaS1uYXZiYXIgdWwge1xuICBib3JkZXI6IDFweCBzb2xpZCAjM2Y0MDQxO1xuICBib3JkZXItcmFkaXVzOiAwLjNlbTtcbiAgcGFkZGluZy1sZWZ0OiAwO1xuICB3aWR0aDogMTAwJTtcbn1cblxuaGVhZGVyIGxpIHtcbiAgbGlzdC1zdHlsZTogbm9uZTtcbiAgbWFyZ2luOiAuMzVlbTtcbiAgcGFkZGluZzogMCAuOTVlbTtcbn1cblxuaGVhZGVyIGEge1xuICB0ZXh0LWRlY29yYXRpb246IG5vbmU7XG4gIGNvbG9yOiB3aGl0ZTtcbiAgY3Vyc29yOiBwb2ludGVyO1xufVxuXG5uYXYge1xuICBib3JkZXItdG9wOiAxcHggc29saWQgIzM4MzgzODtcbiAgXG59XG5uYXYgdWwge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG59XG5cbi5sb2dvIHtcbiAgZm9udC1zaXplOiAxLjNlbTtcbiAgY29sb3I6IHdoaXRlO1xuICBwYWRkaW5nLWJvdHRvbTogMDtcbn1cblxuLmxvZ28td3JhcCB7XG4gIGZvbnQtZmFtaWx5OiAnQmFkIHNjcmlwdCcsIGN1cnNpdmU7XG4gIGxldHRlci1zcGFjaW5nOiAuNWVtO1xuICBtYXJnaW46IDAuNWVtIDA7XG59XG5cbi5taW5pLW5hdmJhci13cmFwIHtcbiAgZGlzcGxheTogZmxleDtcbiAgZmxleC1kaXJlY3Rpb246IHJvdztcbiAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICB3aWR0aDogNzUlO1xuICBtYXJnaW46IGF1dG87XG59XG5cbi8qIG1pbmktbmF2YmFyICovXG5cbi5taW5pLW5hdmJhciB1bCB7XG4gIGJhY2tncm91bmQtY29sb3I6ICNjM2M2Yzc7XG4gIGJvcmRlci1yYWRpdXM6IDVweDtcbn1cblxuLm1pbmktbmF2YmFyIHVsIGxpK2xpIHtcbiAgYm9yZGVyLWxlZnQ6IDFweCBzb2xpZCBsaWdodGdyZXk7XG4gIHBhZGRpbmctbGVmdDogLjVlbTtcbn1cblxuLm5vdGlmaWNhdGlvbiB7XG4gIHBvc2l0aW9uOiBmaXhlZDtcbiAgei1pbmRleDogMTA7XG4gIHJpZ2h0OiA4JTtcbiAgdG9wOiA4JTtcbiAgcGFkZGluZzogMC41cmVtO1xuICBib3JkZXItcmFkaXVzOiAwLjVyZW07XG4gIGNvbG9yOiByZ2IoMjU1LCAyNTUsIDI1NSk7XG4gIGZvbnQtc3R5bGU6IGl0YWxpYztcbiAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gIGJveC1zaGFkb3c6IDAgNXB4IDEwcHggcmdiKDIwNCwgMjA0LCAyMDQpO1xuICBiYWNrZ3JvdW5kLWNvbG9yOiByZ2JhKDIzOCwgNzQsIDc0LCAwLjY5OSk7XG59XG5cbi5lcnJvci1tZXNzYWdlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSgyMzgsIDc0LCA3NCwgMC42OTkpO1xufVxuXG4uc3VjY2Vzcy1tZXNzYWdlIHtcbiAgYmFja2dyb3VuZC1jb2xvcjogcmdiYSg5OSwgMjMwLCA4MSwgMC42OTkpO1xufSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"AAMA,SAA4BA,WAAW,QAAQ,wBAAwB;;;;;;;;ICDnEC,8BAAyD;IAGvBA,qBAAK;IAAAA,iBAAI;IAEvCA,0BAAI;IAC6BA,wBAAQ;IAAAA,iBAAI;;;;;;IAIjDA,8BAAuD;IAGxBA,YAA8C;;IAAAA,iBAAI;IAE7EA,0BAAI;IAC4BA;MAAAA;MAAA;MAAA,OAASA,qCAAe;IAAA,EAAC;IAAEA,sBAAM;IAAAA,iBAAI;;;;IAH1CA,eAA8C;IAA9CA,2FAA8C;;;;;;;;;;;IAO7EA,6BACqB;IACrBA,YACF;IAAAA,iBAAI;;;;IAHiBA,mGAAmF;IAEtGA,eACF;IADEA,+CACF;;;ADdF,OAAM,MAAOC,eAAe;EAY1BC,YAAmBC,WAAwB,EAAUC,MAAc,EAAUC,UAA6B;IAAvF,gBAAW,GAAXF,WAAW;IAAuB,WAAM,GAANC,MAAM;IAAkB,eAAU,GAAVC,UAAU;IAVvF,iBAAY,GAAsB,IAAI,CAACF,WAAW,CAACG,YAAY;IAC/D,gBAAW,GAAwB,IAAI,CAACH,WAAW,CAACI,WAAW;IAKvD,iBAAY,GAAY,KAAK;EAKrC;EAEAC,QAAQ;IACN,IAAI,CAACC,YAAY,GAAG,IAAI,CAACJ,UAAU,CAACK,aAAa,CAACC,SAAS,CAACC,UAAU,IAAG;MACvE;MACA,IAAI,CAACC,OAAO,GAAG,WAAU,aAAVD,UAAU,uBAAVA,UAAU,CAAEE,IAAI,KAAI,EAAE;MACrC,IAAI,CAACC,cAAc,GAAG,WAAU,aAAVH,UAAU,uBAAVA,UAAU,CAAEI,IAAI,MAAKjB,WAAW,CAACkB,KAAK;MAE5D,IAAI,IAAI,CAACJ,OAAO,EAAE;QAChBK,UAAU,CAAC,MAAK;UACd,IAAI,CAACb,UAAU,CAACc,KAAK,EAAE;QACzB,CAAC,EAAE,IAAI,CAAC;;IAEZ,CAAC,CAAC;EACJ;EAEAC,WAAW;IACT,IAAI,CAACX,YAAY,CAACY,WAAW,EAAE;EACjC;EAEAC,aAAa;IACX,IAAI,IAAI,CAACC,YAAY,EAAE;MACrB;;IAGF,IAAI,CAACA,YAAY,GAAG,IAAI;IACxB;IAEA,IAAI,CAACpB,WAAW,CAACqB,OAAO,EAAE,CAACb,SAAS,CAAC;MACnCc,IAAI,EAAEC,IAAI,IAAG;QACX;MAAA,CACD;MACDC,QAAQ,EAAE,MAAK;QACb,IAAI,CAACJ,YAAY,GAAG,KAAK;QACzB,IAAI,CAACnB,MAAM,CAACwB,QAAQ,CAAC,CAAC,OAAO,CAAC,CAAC;QAC/B,IAAI,CAACvB,UAAU,CAACwB,gBAAgB,CAAC;UAC/Bf,IAAI,EAAE,kBAAkB;UACxBE,IAAI,EAAEjB,WAAW,CAAC+B;SACnB,CAAC;MACJ,CAAC;MACDC,KAAK,EAAE,MAAK;QACV,IAAI,CAACR,YAAY,GAAG,KAAK;MAC3B;KACD,CAAC;EACJ;;;mBAzDWtB,eAAe;AAAA;;QAAfA,eAAe;EAAA+B;EAAAC;EAAAC;EAAAC;EAAAC;IAAA;MCd5BpC,8BAAQ;MAGiCA,kCAAkB;MAAAA,iBAAO;MAE9DA,gEASM;;MACNA,gEASM;;MACNA,8DAGE;MACJA,iBAAM;MACNA,4BAAK;MAGuBA,qBAAI;MAAAA,iBAAI;MAEhCA,2BAAI;MACsBA,uBAAM;MAAAA,iBAAI;MAEpCA,2BAAI;MAC4BA,0BAAS;MAAAA,iBAAI;MAW7CA,2BAAI;MACuBA,yBAAQ;MAAAA,iBAAI;;;MA9CfA,eAA4B;MAA5BA,6DAA4B;MAU5BA,eAA2B;MAA3BA,4DAA2B;MAUjDA,eAAa;MAAbA,kCAAa","names":["MessageType","i0","HeaderComponent","constructor","authService","router","messageBus","currentUser$","isLoggedIn$","ngOnInit","subscription","onNewMessage$","subscribe","newMessage","message","text","isMessageError","type","Error","setTimeout","clear","ngOnDestroy","unsubscribe","logoutHandler","isLoggingOut","logout$","next","args","complete","navigate","notifyForMessage","Success","error","selectors","decls","vars","consts","template"],"sourceRoot":"","sources":["D:\\Softuni\\softUni-Angular\\exam-project\\src\\app\\core\\header\\header.component.ts","D:\\Softuni\\softUni-Angular\\exam-project\\src\\app\\core\\header\\header.component.html"],"sourcesContent":["import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable, Subscription } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { AuthService } from 'src/app/auth.service';\nimport { IUser } from '../interfaces';\nimport { MessageBusService, MessageType } from '../message-bus.service';\nimport { UserService } from '../user.service';\n\n@Component({\n  selector: 'app-header',\n  templateUrl: './header.component.html',\n  styleUrls: ['./header.component.css']\n})\nexport class HeaderComponent implements OnInit, OnDestroy {\n\n  currentUser$: Observable<IUser> = this.authService.currentUser$;\n  isLoggedIn$: Observable<boolean> = this.authService.isLoggedIn$;\n\n  message: string;\n  isMessageError: boolean;\n\n  private isLoggingOut: boolean = false;\n\n  private subscription: Subscription;\n\n  constructor(public authService: AuthService, private router: Router, private messageBus: MessageBusService) {\n  }\n\n  ngOnInit(): void {\n    this.subscription = this.messageBus.onNewMessage$.subscribe(newMessage => {\n      //console.log('onNewMessage$.subscribe', newMessage);\n      this.message = newMessage?.text || '';\n      this.isMessageError = newMessage?.type === MessageType.Error;\n\n      if (this.message) {\n        setTimeout(() => {\n          this.messageBus.clear();\n        }, 5000);\n      }\n    });\n  }\n\n  ngOnDestroy(): void {\n    this.subscription.unsubscribe();\n  }\n\n  logoutHandler(): void {\n    if (this.isLoggingOut) {\n      return;\n    }\n\n    this.isLoggingOut = true;\n    //console.log('logout called');\n\n    this.authService.logout$().subscribe({\n      next: args => {\n        //console.log(args);\n      },\n      complete: () => {\n        this.isLoggingOut = false;\n        this.router.navigate(['/home']);\n        this.messageBus.notifyForMessage({\n          text: 'User logged out!',\n          type: MessageType.Success\n        })\n      },\n      error: () => {\n        this.isLoggingOut = false;\n      }\n    });\n  }\n}\n","<header>\n  <div class=\"mini-navbar-wrap\">\n    <div class=\"logo-wrap\">\n      <p class=\"logo\"><span class=\"logo\">The Movie Universe</span></p>\n    </div>\n    <div class=\"mini-navbar\" *ngIf=\"!(isLoggedIn$ | async)\" >\n      <ul>\n        <li>\n          <a routerLink=\"/user/login\">Login</a>\n        </li>\n        <li>\n          <a routerLink=\"/user/register\">Register</a>\n        </li>\n      </ul>\n    </div>\n    <div class=\"mini-navbar\" *ngIf=\"(isLoggedIn$ | async)\">\n      <ul>\n        <li>\n          <a routerLink=\"/profile\">{{( currentUser$ | async).username}}'s Profile</a>\n        </li>\n        <li>\n          <a href=\"javascript:void(0);\" (click)=\"logoutHandler()\" >Logout</a>\n        </li>\n      </ul>\n    </div>\n    <p *ngIf=\"message\" [ngClass]=\"{'error-message' : isMessageError, 'success-message' : !isMessageError}\"\n    class=\"notification\">\n    {{message}}\n  </p>\n  </div>\n  <nav>\n    <ul>\n      <li>\n        <a routerLink=\"/home\">Home</a>\n      </li>\n      <li>\n        <a routerLink=\"/movies\">Movies</a>\n      </li>\n      <li>\n          <a routerLink=\"/movies/new\">Add movie</a>\n        </li>\n      <!-- <li>\n        <a routerLink=\"/top-photos\">Top rated</a>\n      </li>\n      <li>\n        <a routerLink=\"/offers\">Bazar</a>\n      </li>\n      <li>\n        <a routerLink=\"/add-offer\">Add offer</a>\n      </li> -->\n      <li>\n          <a routerLink=\"/about\">About us</a>\n      </li>\n\n      <!-- <p *ngIf=\"!!message\" [ngClass]=\"{'error-message': isMessageError, 'success-message': !isMessageError}\" class=\"notification\">\n        \n      </p> -->\n    </ul>\n  </nav>\n</header>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}