{"ast":null,"code":"import { enterEditMode, exitEditMode, profilePageInitalized, updateProfileStarted } from '../+store/actions';\nimport { trigger, style, animate, transition, query, stagger } from '@angular/animations';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/user.service\";\nimport * as i2 from \"src/app/core/movie.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@ngrx/store\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nimport * as i7 from \"../email-validator.directive\";\nconst _c0 = [\"editProfileForm\"];\nfunction ProfileComponent_ng_container_4_ng_container_1_button_24_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_4_ng_container_1_button_24_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const currentUser_r1 = i0.ɵɵnextContext(2).ngIf;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.showUserMovies(currentUser_r1, \"show\"));\n    });\n    i0.ɵɵtext(1, \" My movies\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_container_4_ng_container_1_button_25_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_4_ng_container_1_button_25_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const currentUser_r1 = i0.ɵɵnextContext(2).ngIf;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.showUserMovies(currentUser_r1, \"hide\"));\n    });\n    i0.ɵɵtext(1, \" Hide movies\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_container_4_ng_container_1_button_26_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_4_ng_container_1_button_26_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const currentUser_r1 = i0.ɵɵnextContext(2).ngIf;\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.showLikedByUserMovies(currentUser_r1, \"show\"));\n    });\n    i0.ɵɵtext(1, \" Liked movies\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_container_4_ng_container_1_button_27_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 12);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_4_ng_container_1_button_27_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const currentUser_r1 = i0.ɵɵnextContext(2).ngIf;\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.showLikedByUserMovies(currentUser_r1, \"hide\"));\n    });\n    i0.ɵɵtext(1, \" Hide movies\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_container_4_ng_container_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 3)(2, \"p\");\n    i0.ɵɵtext(3, \"Username: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(6, \"div\", 3)(7, \"p\");\n    i0.ɵɵtext(8, \"Email: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(9, \"p\");\n    i0.ɵɵtext(10);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(11, \"div\", 4)(12, \"div\", 5)(13, \"span\", 6);\n    i0.ɵɵtext(14, \"Movies\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(15, \"span\", 7);\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(17, \"div\", 5)(18, \"span\", 8);\n    i0.ɵɵtext(19, \"Comments\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(20, \"span\", 9);\n    i0.ɵɵtext(21);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(22, \"button\", 10);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_4_ng_container_1_Template_button_click_22_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const currentUser_r1 = i0.ɵɵnextContext().ngIf;\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.enterEditMode(currentUser_r1));\n    });\n    i0.ɵɵtext(23, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(24, ProfileComponent_ng_container_4_ng_container_1_button_24_Template, 2, 0, \"button\", 11);\n    i0.ɵɵtemplate(25, ProfileComponent_ng_container_4_ng_container_1_button_25_Template, 2, 0, \"button\", 11);\n    i0.ɵɵtemplate(26, ProfileComponent_ng_container_4_ng_container_1_button_26_Template, 2, 0, \"button\", 11);\n    i0.ɵɵtemplate(27, ProfileComponent_ng_container_4_ng_container_1_button_27_Template, 2, 0, \"button\", 11);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const currentUser_r1 = i0.ɵɵnextContext().ngIf;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(currentUser_r1.username);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(currentUser_r1.email);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(currentUser_r1.movies.length);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(currentUser_r1.comments.length);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.isShowMovies);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isShowMovies);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.isLikedShow);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isLikedShow);\n  }\n}\nfunction ProfileComponent_ng_container_4_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r29 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"form\", 13, 14);\n    i0.ɵɵlistener(\"ngSubmit\", function ProfileComponent_ng_container_4_ng_container_3_Template_form_ngSubmit_1_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r28 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r28.updateProfile());\n    });\n    i0.ɵɵelementStart(3, \"div\", 3)(4, \"p\");\n    i0.ɵɵtext(5, \"Username: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(6, \"input\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(7, \"div\", 3)(8, \"p\");\n    i0.ɵɵtext(9, \"Email: \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(10, \"input\", 16, 17);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"div\", 4)(13, \"div\", 5)(14, \"span\", 6);\n    i0.ɵɵtext(15, \"Movies\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(16, \"span\", 7);\n    i0.ɵɵtext(17);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(18, \"div\", 5)(19, \"span\", 8);\n    i0.ɵɵtext(20, \"Comments\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"span\", 9);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(23, \"button\", 18);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_4_ng_container_3_Template_button_click_23_listener() {\n      i0.ɵɵrestoreView(_r29);\n      const ctx_r30 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r30.exitEditMode());\n    });\n    i0.ɵɵtext(24, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(25, \"button\", 19);\n    i0.ɵɵtext(26, \"Save\");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const _r26 = i0.ɵɵreference(2);\n    const _r27 = i0.ɵɵreference(11);\n    const currentUser_r1 = i0.ɵɵnextContext().ngIf;\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(6);\n    i0.ɵɵpropertyInterpolate(\"value\", ctx_r3.currentUser$.username);\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"input-error\", _r27.touched && _r27.invalid);\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(currentUser_r1.movies.length);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(currentUser_r1.comments.length);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"disabled\", _r26.invalid);\n  }\n}\nfunction ProfileComponent_ng_container_4_ng_container_5_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\", 22)(2, \"strong\");\n    i0.ɵɵtext(3, \" You don't have any movies \");\n    i0.ɵɵelementEnd()()();\n  }\n}\nconst _c1 = function (a1) {\n  return [\"/movies\", a1];\n};\nfunction ProfileComponent_ng_container_4_ng_container_5_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 23)(2, \"div\", 4)(3, \"div\", 5)(4, \"span\", 6);\n    i0.ɵɵtext(5, \"Movie:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 7);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 24)(9, \"button\", 25);\n    i0.ɵɵtext(10, \"Details\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const movie_r34 = ctx.$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(movie_r34.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c1, movie_r34._id));\n  }\n}\nfunction ProfileComponent_ng_container_4_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h4\");\n    i0.ɵɵtext(2, \"My Movies:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProfileComponent_ng_container_4_ng_container_5_div_3_Template, 4, 0, \"div\", 2);\n    i0.ɵɵelementStart(4, \"div\")(5, \"div\", 20);\n    i0.ɵɵtemplate(6, ProfileComponent_ng_container_4_ng_container_5_div_6_Template, 11, 4, \"div\", 21);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.userMovies.length == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"@.disabled\", ctx_r4.isDisabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"@itemAnimation\", ctx_r4.userMovies.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.userMovies);\n  }\n}\nfunction ProfileComponent_ng_container_4_ng_container_6_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 23)(2, \"div\", 4)(3, \"div\", 5)(4, \"span\", 6);\n    i0.ɵɵtext(5, \"Movie:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 7);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 24)(9, \"button\", 25);\n    i0.ɵɵtext(10, \"Details\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const movie_r36 = ctx.$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(movie_r36.title);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c1, movie_r36._id));\n  }\n}\nfunction ProfileComponent_ng_container_4_ng_container_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h4\");\n    i0.ɵɵtext(2, \"Liked Movies:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\")(4, \"div\", 20);\n    i0.ɵɵtemplate(5, ProfileComponent_ng_container_4_ng_container_6_div_5_Template, 11, 4, \"div\", 21);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"@.disabled\", ctx_r5.isDisabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"@itemAnimation\", ctx_r5.userMovies.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.likedMovies);\n  }\n}\nfunction ProfileComponent_ng_container_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵtemplate(1, ProfileComponent_ng_container_4_ng_container_1_Template, 28, 8, \"ng-container\", 2);\n    i0.ɵɵpipe(2, \"async\");\n    i0.ɵɵtemplate(3, ProfileComponent_ng_container_4_ng_container_3_Template, 27, 6, \"ng-container\", 2);\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵtemplate(5, ProfileComponent_ng_container_4_ng_container_5_Template, 7, 4, \"ng-container\", 2);\n    i0.ɵɵtemplate(6, ProfileComponent_ng_container_4_ng_container_6_Template, 6, 3, \"ng-container\", 2);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(2, 4, ctx_r0.isInEditMode$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(4, 6, ctx_r0.isInEditMode$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isShowMovies);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isLikedShow);\n  }\n}\nexport class ProfileComponent {\n  constructor(userService, movieService, router, store) {\n    this.userService = userService;\n    this.movieService = movieService;\n    this.router = router;\n    this.store = store;\n    this.currentUser$ = this.store.select(state => state.auth.profile.currentProfile);\n    // newProfilePicture?: File\n    this.isInEditMode$ = this.store.select(state => state.auth.profile.isInEditMode);\n    this.hasErrorHappened = this.store.select(state => state.auth.profile.errorHappened);\n    this.userMovies = [];\n    this.isShowMovies = false;\n    this.isLikedShow = false;\n    this.likedMovies = [];\n    this.isDisabled = true;\n  }\n  ngOnInit() {\n    this.store.dispatch(profilePageInitalized());\n    this.hasErrorHappened.subscribe(hasError => {\n      if (hasError) {\n        this.router.navigate(['/user/login']);\n      }\n    });\n  }\n  enterEditMode(currentUser) {\n    this.store.dispatch(enterEditMode());\n    setTimeout(() => {\n      this.editProfileForm.form.patchValue({\n        email: currentUser.email,\n        username: currentUser.username\n      });\n    });\n  }\n  showUserMovies(currentUser, action) {\n    if (action == 'show') {\n      // console.log(this.currentUser._id)\n      this.movieService.getAllMoviesByUser$(currentUser._id).subscribe({\n        next: movies => {\n          // console.log(recipes)\n          this.userMovies = movies;\n          this.isShowMovies = !this.isShowMovies;\n          this.isDisabled = !this.isDisabled;\n        },\n        error: error => {\n          console.log(error);\n        }\n      });\n    } else if (action == 'hide') {\n      this.isShowMovies = !this.isShowMovies;\n      this.isDisabled = !this.isDisabled;\n    }\n  }\n  updateProfile() {\n    this.store.dispatch(updateProfileStarted({\n      user: {\n        username: this.editProfileForm.value.username,\n        email: this.editProfileForm.value.email\n        // profilePicture: this.newProfilePicture\n      }\n    }));\n  }\n\n  exitEditMode() {\n    this.store.dispatch(exitEditMode());\n  }\n  handleProfilePictureChange(event) {\n    const input = event.target;\n    // this.newProfilePicture = input.files[0]\n    // console.log(this.newProfilePicture)\n  }\n\n  showLikedByUseMovies(currentUser, action) {\n    if (action == 'show') {\n      this.movieService.getAllLikedByUser$(currentUser._id).subscribe({\n        next: movies => {\n          console.log(movies);\n          this.likedMovies = movies;\n          this.isLikedShow = !this.isLikedShow;\n          this.isDisabled = !this.isDisabled;\n        },\n        error: error => {\n          console.log(error);\n        }\n      });\n    } else if (action == 'hide') {\n      this.isLikedShow = !this.isLikedShow;\n      this.isDisabled = !this.isDisabled;\n    }\n  }\n}\nProfileComponent.ɵfac = function ProfileComponent_Factory(t) {\n  return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.MovieService), i0.ɵɵdirectiveInject(i3.Router), i0.ɵɵdirectiveInject(i4.Store));\n};\nProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProfileComponent,\n  selectors: [[\"app-profile\"]],\n  viewQuery: function ProfileComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.editProfileForm = _t.first);\n    }\n  },\n  decls: 6,\n  vars: 4,\n  consts: [[1, \"profile\"], [\"alt\", \"default user\", 3, \"src\"], [4, \"ngIf\"], [1, \"flex\"], [1, \"p-2\", \"mt-2\", \"bg-primary\", \"d-flex\", \"justify-content-between\", \"rounded\", \"text-white\", \"stats\"], [1, \"d-flex\", \"flex-column\"], [1, \"articles\"], [1, \"number1\"], [1, \"followers\"], [1, \"number2\"], [1, \"edit-button\", 3, \"click\"], [\"class\", \"btn btn-sm btn-primary w-100 ml-2\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", \"w-100\", \"ml-2\", 3, \"click\"], [3, \"ngSubmit\"], [\"editProfileForm\", \"ngForm\"], [\"type\", \"text\", \"name\", \"username\", \"ngModel\", \"\", \"required\", \"\", \"minlength\", \"5\", \"id\", \"username\", 3, \"value\"], [\"type\", \"email\", \"name\", \"email\", \"id\", \"email\", \"ngModel\", \"\", \"required\", \"\", \"emailValidator\", \"\", \"value\", \"john.doe@gmail.com\"], [\"email\", \"ngModel\"], [\"type\", \"button\", 1, \"red-button\", 3, \"click\"], [1, \"green-button\", 3, \"disabled\"], [1, \"pb-5\"], [4, \"ngFor\", \"ngForOf\"], [1, \"emptyarray\"], [1, \"container\", \"mt-2\"], [1, \"d-flex\", \"flex-column\", \"mt-1\"], [1, \"btn\", \"btn-sm\", \"btn-outline-primary\", 3, \"routerLink\"]],\n  template: function ProfileComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelement(1, \"img\", 1);\n      i0.ɵɵelementStart(2, \"h3\");\n      i0.ɵɵtext(3, \"User Info:\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(4, ProfileComponent_ng_container_4_Template, 7, 8, \"ng-container\", 2);\n      i0.ɵɵpipe(5, \"async\");\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"src\", \"/assets/profile.png\", i0.ɵɵsanitizeUrl);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(5, 2, ctx.currentUser$));\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i3.RouterLink, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.MinLengthValidator, i6.NgModel, i6.NgForm, i7.EmailValidatorDirective, i5.AsyncPipe],\n  styles: [\"[_nghost-%COMP%] {\\n     width: 100%; \\n     height: 67vh;\\n}\\n\\n.profile[_ngcontent-%COMP%] {\\n    width: 100%;\\n    max-width: 500px;\\n    margin: 70px auto;\\n    padding: 10px;\\n    border: 4px solid rgb(22, 43, 42);  \\n    border-radius: 8px;\\n    font-family: \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n    color: rgb(68, 68, 68);\\n    background-color: hsla(0, 0%, 94.1%, .8);\\n    box-shadow: 0 0 1em 0 #000;\\n    text-align: center;\\n}\\n\\n.profile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n    text-decoration: underline;\\n    color: rgb(22, 43, 42);  \\n}\\n\\n.profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n    width: 7em;\\n    height: 7em;\\n    margin: auto;\\n    display: block;\\n}\\n\\n.flex[_ngcontent-%COMP%] {\\n    display: flex;\\n}\\n\\n.flex[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child {\\n    width: 35%;\\n    text-align: right;\\n    margin: .5em;\\n}\\n\\n.flex[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child {\\n    width: 55%;\\n    text-align: left;\\n    margin: .5em;\\n    font-weight: bold;\\n}\\n\\n.profile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n    color: white;\\n    border: none;\\n    border-radius: 0.3em;\\n    padding: 0.6em 1.2em;\\n    outline: none;\\n}\\n\\n.flex[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%], .flex[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\\n    width: 55%;\\n    text-align: left;\\n    margin: .5em;\\n}\\n\\n.flex[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%] {\\n    width: 77%;\\n}\\n\\n.flex[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\\n    padding: 0.17em 0;\\n}\\n\\n.red-button[_ngcontent-%COMP%] {\\n    background-color: red;\\n}\\n\\n.green-button[_ngcontent-%COMP%] {\\n    background-color: green;\\n}\\n\\n.input-error[_ngcontent-%COMP%] {\\n    border-left: 3px solid red;\\n}\\n/*# sourceURL=webpack://./src/app/auth/profile/profile.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXV0aC9wcm9maWxlL3Byb2ZpbGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtLQUNLLFdBQVc7S0FDWCxZQUFZO0FBQ2pCOztBQUVBO0lBQ0ksV0FBVztJQUNYLGdCQUFnQjtJQUNoQixpQkFBaUI7SUFDakIsYUFBYTtJQUNiLGlDQUFpQztJQUNqQyxrQkFBa0I7SUFDbEIsMkRBQTJEO0lBQzNELHNCQUFzQjtJQUN0Qix3Q0FBd0M7SUFDeEMsMEJBQTBCO0lBQzFCLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLDBCQUEwQjtJQUMxQixzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxVQUFVO0lBQ1YsV0FBVztJQUNYLFlBQVk7SUFDWixjQUFjO0FBQ2xCOztBQUVBO0lBQ0ksYUFBYTtBQUNqQjs7QUFFQTtJQUNJLFVBQVU7SUFDVixpQkFBaUI7SUFDakIsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLFVBQVU7SUFDVixnQkFBZ0I7SUFDaEIsWUFBWTtJQUNaLGlCQUFpQjtBQUNyQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixZQUFZO0lBQ1osb0JBQW9CO0lBQ3BCLG9CQUFvQjtJQUNwQixhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksVUFBVTtJQUNWLGdCQUFnQjtJQUNoQixZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksVUFBVTtBQUNkOztBQUVBO0lBQ0ksaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0kscUJBQXFCO0FBQ3pCOztBQUVBO0lBQ0ksdUJBQXVCO0FBQzNCOztBQUVBO0lBQ0ksMEJBQTBCO0FBQzlCIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICAgICB3aWR0aDogMTAwJTsgXG4gICAgIGhlaWdodDogNjd2aDtcbn1cblxuLnByb2ZpbGUge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIG1heC13aWR0aDogNTAwcHg7XG4gICAgbWFyZ2luOiA3MHB4IGF1dG87XG4gICAgcGFkZGluZzogMTBweDtcbiAgICBib3JkZXI6IDRweCBzb2xpZCByZ2IoMjIsIDQzLCA0Mik7ICBcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgZm9udC1mYW1pbHk6IFwiSGVsdmV0aWNhIE5ldWVcIiwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjtcbiAgICBjb2xvcjogcmdiKDY4LCA2OCwgNjgpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IGhzbGEoMCwgMCUsIDk0LjElLCAuOCk7XG4gICAgYm94LXNoYWRvdzogMCAwIDFlbSAwICMwMDA7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4ucHJvZmlsZSBoMyB7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgY29sb3I6IHJnYigyMiwgNDMsIDQyKTsgIFxufVxuXG4ucHJvZmlsZSBpbWcge1xuICAgIHdpZHRoOiA3ZW07XG4gICAgaGVpZ2h0OiA3ZW07XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4uZmxleCB7XG4gICAgZGlzcGxheTogZmxleDtcbn1cblxuLmZsZXggcDpmaXJzdC1jaGlsZCB7XG4gICAgd2lkdGg6IDM1JTtcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICBtYXJnaW46IC41ZW07XG59XG5cbi5mbGV4IHA6bGFzdC1jaGlsZCB7XG4gICAgd2lkdGg6IDU1JTtcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgIG1hcmdpbjogLjVlbTtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLnByb2ZpbGUgYnV0dG9uIHtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGJvcmRlci1yYWRpdXM6IDAuM2VtO1xuICAgIHBhZGRpbmc6IDAuNmVtIDEuMmVtO1xuICAgIG91dGxpbmU6IG5vbmU7XG59XG5cbi5mbGV4ID4gaW5wdXQsIC5mbGV4ID4gZGl2IHtcbiAgICB3aWR0aDogNTUlO1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgbWFyZ2luOiAuNWVtO1xufVxuXG4uZmxleCA+IGRpdiA+IGlucHV0IHtcbiAgICB3aWR0aDogNzclO1xufVxuXG4uZmxleCBzZWxlY3Qge1xuICAgIHBhZGRpbmc6IDAuMTdlbSAwO1xufVxuXG4ucmVkLWJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmVkO1xufVxuXG4uZ3JlZW4tYnV0dG9uIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBncmVlbjtcbn1cblxuLmlucHV0LWVycm9yIHtcbiAgICBib3JkZXItbGVmdDogM3B4IHNvbGlkIHJlZDtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"],\n  data: {\n    animation: [trigger('itemAnimation', [transition('* => *', [query('div', style({\n      transform: 'translateX(-100%)'\n    })), query('div', stagger('100ms', [animate('300ms', style({\n      transform: 'translateX(0)'\n    }))]))])])]\n  }\n});","map":{"version":3,"mappings":"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","names":["enterEditMode","exitEditMode","profilePageInitalized","updateProfileStarted","trigger","style","animate","transition","query","stagger","i0","ProfileComponent","constructor","userService","movieService","router","store","select","state","auth","profile","currentProfile","isInEditMode","errorHappened","ngOnInit","dispatch","hasErrorHappened","subscribe","hasError","navigate","currentUser","setTimeout","editProfileForm","form","patchValue","email","username","showUserMovies","action","getAllMoviesByUser$","_id","next","movies","userMovies","isShowMovies","isDisabled","error","console","log","updateProfile","user","value","handleProfilePictureChange","event","input","target","showLikedByUseMovies","getAllLikedByUser$","likedMovies","isLikedShow","selectors","viewQuery","transform"],"sourceRoot":"","sources":["D:\\Softuni\\softUni-Angular\\exam-project\\src\\app\\auth\\profile\\profile.component.ts","D:\\Softuni\\softUni-Angular\\exam-project\\src\\app\\auth\\profile\\profile.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { Observable } from 'rxjs';\nimport { IUser } from 'src/app/core/interfaces';\nimport { IMovie } from 'src/app/core/interfaces';\nimport { IAuthModuleState } from '../+store';\nimport { MovieService } from 'src/app/core/movie.service';\nimport { UserService } from 'src/app/core/user.service';\nimport { enterEditMode, exitEditMode, profilePageInitalized, updateProfileStarted } from '../+store/actions';\nimport { trigger, style, animate, transition, query, stagger } from '@angular/animations'\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.css'],\n  animations: [\n    trigger('itemAnimation', [\n      transition('* => *', [\n        query('div', style({ transform: 'translateX(-100%)' })),\n        query('div',\n          stagger('100ms', [\n            animate('300ms', style({ transform: 'translateX(0)' }))\n          ]))\n      ])\n    ])\n  ]\n})\nexport class ProfileComponent implements OnInit {\n\n  @ViewChild('editProfileForm') editProfileForm: NgForm;\n\n  currentUser$: Observable<IUser> = this.store.select(state => state.auth.profile.currentProfile)\n\n  // newProfilePicture?: File\n\n  isInEditMode$: Observable<boolean> = this.store.select(state => state.auth.profile.isInEditMode);\n\n  hasErrorHappened: Observable<boolean> = this.store.select(state => state.auth.profile.errorHappened);\n\n  userMovies: IMovie[] = [];\n\n  isShowMovies: boolean = false;\n\n  isLikedShow: boolean = false;\n  likedMovies: IMovie[] = [];\n\n  isDisabled: boolean = true;\n\n  constructor(\n    private userService: UserService,\n    private movieService: MovieService,\n    private router: Router,\n    private store: Store<IAuthModuleState>) { }\n\n  ngOnInit(): void {\n    this.store.dispatch(profilePageInitalized());\n\n    this.hasErrorHappened.subscribe((hasError) => {\n      if (hasError) {\n        this.router.navigate(['/user/login'])\n      }\n    })\n  }\n\n  enterEditMode(currentUser: IUser): void {\n    this.store.dispatch(enterEditMode());\n\n    setTimeout(() => {\n      this.editProfileForm.form.patchValue({\n        email: currentUser.email,\n        username: currentUser.username,\n      })\n    });\n  }\n\n  showUserMovies(currentUser: IUser, action: string) {\n\n    if (action == 'show') {\n      // console.log(this.currentUser._id)\n      this.movieService.getAllMoviesByUser$(currentUser._id).subscribe({\n        next: (movies) => {\n          // console.log(recipes)\n          this.userMovies = movies;\n          this.isShowMovies = !this.isShowMovies;\n          this.isDisabled = !this.isDisabled;\n        },\n        error: (error) => {\n          console.log(error);\n        }\n      })\n    } else if (action == 'hide') {\n      this.isShowMovies = !this.isShowMovies;\n      this.isDisabled = !this.isDisabled;\n    }\n  }\n\n  updateProfile(): void {\n    this.store.dispatch(updateProfileStarted({\n      user: {\n        username: this.editProfileForm.value.username,\n        email: this.editProfileForm.value.email,\n        // profilePicture: this.newProfilePicture\n      }\n      \n    }));\n  }\n\n\n  exitEditMode(): void {\n    this.store.dispatch(exitEditMode());\n  }\n\n  handleProfilePictureChange(event: InputEvent){\n    const input: HTMLInputElement = event.target as HTMLInputElement;\n    // this.newProfilePicture = input.files[0]\n    // console.log(this.newProfilePicture)\n\n  }\n\n  showLikedByUseMovies(currentUser: IUser, action: string) {\n    if (action == 'show') {\n      this.movieService.getAllLikedByUser$(currentUser._id).subscribe({\n        next: (movies) => {\n          console.log(movies)\n          this.likedMovies = movies;\n          this.isLikedShow = !this.isLikedShow;\n          this.isDisabled = !this.isDisabled;\n        },\n        error: (error) => {\n          console.log(error);\n        }\n      })\n    } else if (action == 'hide') {\n      this.isLikedShow = !this.isLikedShow;\n      this.isDisabled = !this.isDisabled;\n    }\n  }\n\n\n}","<div class=\"profile\"><img [src]=\" '/assets/profile.png'\" alt=\"default user\">\n    <h3>User Info:</h3>\n\n    <ng-container *ngIf=\"(currentUser$ | async) as currentUser\">\n        <ng-container *ngIf=\"!(isInEditMode$ | async)\">\n            <div class=\"flex\">\n                <p>Username: </p>\n                <p>{{currentUser.username}}</p>\n            </div>\n            <div class=\"flex\">\n                <p>Email: </p>\n                <p>{{currentUser.email}}</p>\n            </div>\n            <div class=\"p-2 mt-2 bg-primary d-flex justify-content-between rounded text-white stats\">\n                <div class=\"d-flex flex-column\"> <span class=\"articles\">Movies</span> <span\n                        class=\"number1\">{{currentUser.movies.length}}</span> </div>\n                <div class=\"d-flex flex-column\"> <span class=\"followers\">Comments</span> <span\n                        class=\"number2\">{{currentUser.comments.length}}</span> </div>\n            </div>\n            \n            <button (click)=\"enterEditMode(currentUser)\" class=\"edit-button\">Edit</button>\n            <button *ngIf=\"!isShowMovies\" (click)=\"showUserMovies(currentUser, 'show')\"\n                                class=\"btn btn-sm btn-primary w-100 ml-2\">\n                                My movies</button>\n                            <button *ngIf=\"isShowMovies\" (click)=\"showUserMovies(currentUser, 'hide')\"\n                                class=\"btn btn-sm btn-primary w-100 ml-2\">\n                                Hide movies</button>\n                                <button *ngIf=\"!isLikedShow\" (click)=\"showLikedByUserMovies(currentUser, 'show')\"\n                                class=\"btn btn-sm btn-primary w-100 ml-2\">\n                                Liked movies</button>\n                            <button *ngIf=\"isLikedShow\" (click)=\"showLikedByUserMovies(currentUser, 'hide')\"\n                                class=\"btn btn-sm btn-primary w-100 ml-2\">\n                                Hide movies</button>\n\n        </ng-container>\n\n        <ng-container *ngIf=\"isInEditMode$ | async\">\n            <form #editProfileForm=\"ngForm\" (ngSubmit)=\"updateProfile()\">\n                <div class=\"flex\">\n                    <p>Username: </p>\n                    <input type=\"text\" name=\"username\" ngModel required minlength=\"5\" id=\"username\" value=\"{{currentUser$.username}}\">\n                </div>\n                <div class=\"flex\">\n                    <p>Email: </p>\n                    <input #email=\"ngModel\" [class.input-error]=\"email.touched && email.invalid\" type=\"email\" name=\"email\" id=\"email\" ngModel required emailValidator value=\"john.doe@gmail.com\">\n                </div>\n                \n                <!-- <div class=\"flex\">\n                    <p>Profile picture: </p>\n                    <input type=\"file\" accept=\"image/png\" id=\"profile-picture\" (change)=\"handleProfilePictureChange($event)\">\n                </div> -->\n                <div class=\"p-2 mt-2 bg-primary d-flex justify-content-between rounded text-white stats\">\n                    <div class=\"d-flex flex-column\"> <span class=\"articles\">Movies</span> <span\n                            class=\"number1\">{{currentUser.movies.length}}</span> </div>\n                    <div class=\"d-flex flex-column\"> <span class=\"followers\">Comments</span> <span\n                            class=\"number2\">{{currentUser.comments.length}}</span> </div>\n                </div>\n                <button type=\"button\" (click)=\"exitEditMode()\"  class=\"red-button\">Cancel</button>\n                <button   [disabled]=\"editProfileForm.invalid\" class=\"green-button\">Save</button>\n            </form>\n        </ng-container>\n\n        <ng-container *ngIf=\"isShowMovies\">\n            <h4>My Movies:</h4>\n    \n            <div *ngIf=\"userMovies.length == 0\">\n                <p class=\"emptyarray\"><strong> You don't have any movies </strong></p>\n            </div>\n    \n            <div [@.disabled]=\"isDisabled\">\n                <div class=\"pb-5\" [@itemAnimation]=\"userMovies.length\">\n                    <div *ngFor=\"let movie of userMovies\">\n                        <div class=\"container mt-2\">\n                            <div class=\"p-2 mt-2 bg-primary d-flex justify-content-between rounded text-white stats\">\n                                <div class=\"d-flex flex-column\"> <span class=\"articles\">Movie:</span> <span\n                                        class=\"number1\">{{movie.title}}</span> </div>\n                                <div class=\"d-flex flex-column mt-1\"> <button class=\"btn btn-sm btn-outline-primary\"\n                                        [routerLink]=\"['/movies', movie._id]\">Details</button> </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </ng-container>\n\n        <ng-container *ngIf=\"isLikedShow\">\n            <h4>Liked Movies:</h4>\n            <div [@.disabled]=\"isDisabled\">\n                <div class=\"pb-5\" [@itemAnimation]=\"userMovies.length\">\n                    <div *ngFor=\"let movie of likedMovies\">\n                        <div class=\"container mt-2\">\n                            <div class=\"p-2 mt-2 bg-primary d-flex justify-content-between rounded text-white stats\">\n                                <div class=\"d-flex flex-column\"> <span class=\"articles\">Movie:</span> <span\n                                        class=\"number1\">{{movie.title}}</span> </div>\n                                <div class=\"d-flex flex-column mt-1\"> <button class=\"btn btn-sm btn-outline-primary\"\n                                        [routerLink]=\"['/movies', movie._id]\">Details</button> </div>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </ng-container>\n    </ng-container>\n</div>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}