{"ast":null,"code":"import { enterEditMode, exitEditMode, profilePageInitialize, updateProfileStarted } from '../+store/actions';\nimport { trigger, style, animate, transition, query, stagger } from '@angular/animations';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/core/user.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/core/movie.service\";\nimport * as i4 from \"@ngrx/store\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/forms\";\nconst _c0 = [\"editProfileForm\"];\nfunction ProfileComponent_ng_container_0_ng_container_3_button_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r12 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_0_ng_container_3_button_31_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r12);\n      const currentUser_r1 = i0.ɵɵnextContext(2).ngIf;\n      const ctx_r10 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r10.showUserRecipes(currentUser_r1, \"show\"));\n    });\n    i0.ɵɵtext(1, \" My recipes\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_3_button_32_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r15 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_0_ng_container_3_button_32_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r15);\n      const currentUser_r1 = i0.ɵɵnextContext(2).ngIf;\n      const ctx_r13 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r13.showUserRecipes(currentUser_r1, \"hide\"));\n    });\n    i0.ɵɵtext(1, \" Hide recipes\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_3_button_33_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r18 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_0_ng_container_3_button_33_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r18);\n      const currentUser_r1 = i0.ɵɵnextContext(2).ngIf;\n      const ctx_r16 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r16.showLikedByUserRecipes(currentUser_r1, \"show\"));\n    });\n    i0.ɵɵtext(1, \" Liked recipes\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_3_button_34_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r21 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"button\", 17);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_0_ng_container_3_button_34_Template_button_click_0_listener() {\n      i0.ɵɵrestoreView(_r21);\n      const currentUser_r1 = i0.ɵɵnextContext(2).ngIf;\n      const ctx_r19 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r19.showLikedByUserRecipes(currentUser_r1, \"hide\"));\n    });\n    i0.ɵɵtext(1, \" Hide recipes\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_3_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r24 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 1)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n    i0.ɵɵelement(5, \"img\", 5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 6)(7, \"h5\", 7)(8, \"strong\");\n    i0.ɵɵtext(9, \"Username: \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(10, \"span\");\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"h5\", 7)(13, \"strong\");\n    i0.ɵɵtext(14, \"Email: \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(15, \"span\");\n    i0.ɵɵtext(16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(17, \"div\", 8)(18, \"div\", 9)(19, \"span\", 10);\n    i0.ɵɵtext(20, \"Recipes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"span\", 11);\n    i0.ɵɵtext(22);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(23, \"div\", 9)(24, \"span\", 12);\n    i0.ɵɵtext(25, \"Comments\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(26, \"span\", 13);\n    i0.ɵɵtext(27);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(28, \"div\", 14)(29, \"button\", 15);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_0_ng_container_3_Template_button_click_29_listener() {\n      i0.ɵɵrestoreView(_r24);\n      const currentUser_r1 = i0.ɵɵnextContext().ngIf;\n      const ctx_r22 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r22.enterEditMode(currentUser_r1));\n    });\n    i0.ɵɵtext(30, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(31, ProfileComponent_ng_container_0_ng_container_3_button_31_Template, 2, 0, \"button\", 16);\n    i0.ɵɵtemplate(32, ProfileComponent_ng_container_0_ng_container_3_button_32_Template, 2, 0, \"button\", 16);\n    i0.ɵɵtemplate(33, ProfileComponent_ng_container_0_ng_container_3_button_33_Template, 2, 0, \"button\", 16);\n    i0.ɵɵtemplate(34, ProfileComponent_ng_container_0_ng_container_3_button_34_Template, 2, 0, \"button\", 16);\n    i0.ɵɵelementEnd()()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const currentUser_r1 = i0.ɵɵnextContext().ngIf;\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(11);\n    i0.ɵɵtextInterpolate(currentUser_r1.username);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(currentUser_r1.email);\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(currentUser_r1.recipes.length);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(currentUser_r1.comments.length);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.isShowRecipes);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isShowRecipes);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.isLikedShow);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.isLikedShow);\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_5_p_14_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 29);\n    i0.ɵɵtext(1, \" Username is required! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_5_p_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 29);\n    i0.ɵɵtext(1, \" Username must be at least 5 characters! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_5_p_21_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 29);\n    i0.ɵɵtext(1, \" Email is required! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_5_p_22_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 29);\n    i0.ɵɵtext(1, \" Email is not valid! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r34 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"div\", 18)(2, \"div\", 2)(3, \"div\", 3)(4, \"div\", 4);\n    i0.ɵɵelement(5, \"img\", 19);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 6)(7, \"form\", 20, 21);\n    i0.ɵɵlistener(\"ngSubmit\", function ProfileComponent_ng_container_0_ng_container_5_Template_form_ngSubmit_7_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r33 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r33.updateProfile());\n    });\n    i0.ɵɵelementStart(9, \"h5\", 7)(10, \"strong\");\n    i0.ɵɵtext(11, \"Username: \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(12, \"input\", 22, 23);\n    i0.ɵɵtemplate(14, ProfileComponent_ng_container_0_ng_container_5_p_14_Template, 2, 0, \"p\", 24);\n    i0.ɵɵtemplate(15, ProfileComponent_ng_container_0_ng_container_5_p_15_Template, 2, 0, \"p\", 24);\n    i0.ɵɵelementStart(16, \"h5\", 7)(17, \"strong\");\n    i0.ɵɵtext(18, \"Email: \");\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelement(19, \"input\", 25, 26);\n    i0.ɵɵtemplate(21, ProfileComponent_ng_container_0_ng_container_5_p_21_Template, 2, 0, \"p\", 24);\n    i0.ɵɵtemplate(22, ProfileComponent_ng_container_0_ng_container_5_p_22_Template, 2, 0, \"p\", 24);\n    i0.ɵɵelementStart(23, \"div\", 8)(24, \"div\", 9)(25, \"span\", 10);\n    i0.ɵɵtext(26, \"Recipes\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"span\", 11);\n    i0.ɵɵtext(28);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(29, \"div\", 9)(30, \"span\", 12);\n    i0.ɵɵtext(31, \"Comments\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(32, \"span\", 13);\n    i0.ɵɵtext(33);\n    i0.ɵɵelementEnd()()();\n    i0.ɵɵelementStart(34, \"div\", 14)(35, \"button\", 27);\n    i0.ɵɵlistener(\"click\", function ProfileComponent_ng_container_0_ng_container_5_Template_button_click_35_listener() {\n      i0.ɵɵrestoreView(_r34);\n      const ctx_r35 = i0.ɵɵnextContext(2);\n      return i0.ɵɵresetView(ctx_r35.exitEditMode());\n    });\n    i0.ɵɵtext(36, \"Cancel\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(37, \"button\", 28);\n    i0.ɵɵtext(38, \" Save\");\n    i0.ɵɵelementEnd()()()()()()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const _r26 = i0.ɵɵreference(8);\n    const _r27 = i0.ɵɵreference(13);\n    const _r30 = i0.ɵɵreference(20);\n    const currentUser_r1 = i0.ɵɵnextContext().ngIf;\n    i0.ɵɵadvance(12);\n    i0.ɵɵclassProp(\"input-error\", _r27.touched && _r27.invalid);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r26.controls[\"username\"].hasError(\"required\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r26.controls[\"username\"].hasError(\"minlength\"));\n    i0.ɵɵadvance(4);\n    i0.ɵɵclassProp(\"input-error\", _r30.touched && _r30.invalid);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", _r26.controls[\"email\"].hasError(\"required\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", _r26.controls[\"email\"].hasError(\"email\"));\n    i0.ɵɵadvance(6);\n    i0.ɵɵtextInterpolate(currentUser_r1.recipes.length);\n    i0.ɵɵadvance(5);\n    i0.ɵɵtextInterpolate(currentUser_r1.comments.length);\n    i0.ɵɵadvance(4);\n    i0.ɵɵproperty(\"disabled\", _r26.invalid);\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_7_div_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"p\", 32)(2, \"strong\");\n    i0.ɵɵtext(3, \" You don't have any recipes \");\n    i0.ɵɵelementEnd()()();\n  }\n}\nconst _c1 = function (a1) {\n  return [\"/recipes\", a1];\n};\nfunction ProfileComponent_ng_container_0_ng_container_7_div_6_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 33)(2, \"div\", 8)(3, \"div\", 9)(4, \"span\", 10);\n    i0.ɵɵtext(5, \"Recipe:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 11);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 34)(9, \"button\", 35);\n    i0.ɵɵtext(10, \"Details\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const recipe_r39 = ctx.$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(recipe_r39.recipeName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c1, recipe_r39._id));\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h4\");\n    i0.ɵɵtext(2, \"My Recipes:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProfileComponent_ng_container_0_ng_container_7_div_3_Template, 4, 0, \"div\", 0);\n    i0.ɵɵelementStart(4, \"div\")(5, \"div\", 30);\n    i0.ɵɵtemplate(6, ProfileComponent_ng_container_0_ng_container_7_div_6_Template, 11, 4, \"div\", 31);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r4 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4.userRecipes.length == 0);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"@.disabled\", ctx_r4.isDisabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"@itemAnimation\", ctx_r4.userRecipes.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r4.userRecipes);\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_8_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\")(1, \"div\", 33)(2, \"div\", 8)(3, \"div\", 9)(4, \"span\", 10);\n    i0.ɵɵtext(5, \"Recipe:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"span\", 11);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(8, \"div\", 34)(9, \"button\", 35);\n    i0.ɵɵtext(10, \"Details\");\n    i0.ɵɵelementEnd()()()()();\n  }\n  if (rf & 2) {\n    const recipe_r41 = ctx.$implicit;\n    i0.ɵɵadvance(7);\n    i0.ɵɵtextInterpolate(recipe_r41.recipeName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(2, _c1, recipe_r41._id));\n  }\n}\nfunction ProfileComponent_ng_container_0_ng_container_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h4\");\n    i0.ɵɵtext(2, \"Liked Recipes:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(3, \"div\")(4, \"div\", 30);\n    i0.ɵɵtemplate(5, ProfileComponent_ng_container_0_ng_container_8_div_5_Template, 11, 4, \"div\", 31);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r5 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"@.disabled\", ctx_r5.isDisabled);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"@itemAnimation\", ctx_r5.userRecipes.length);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r5.likedRecipes);\n  }\n}\nfunction ProfileComponent_ng_container_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"h4\");\n    i0.ɵɵtext(2, \"User Info:\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(3, ProfileComponent_ng_container_0_ng_container_3_Template, 35, 8, \"ng-container\", 0);\n    i0.ɵɵpipe(4, \"async\");\n    i0.ɵɵtemplate(5, ProfileComponent_ng_container_0_ng_container_5_Template, 39, 11, \"ng-container\", 0);\n    i0.ɵɵpipe(6, \"async\");\n    i0.ɵɵtemplate(7, ProfileComponent_ng_container_0_ng_container_7_Template, 7, 4, \"ng-container\", 0);\n    i0.ɵɵtemplate(8, ProfileComponent_ng_container_0_ng_container_8_Template, 6, 3, \"ng-container\", 0);\n    i0.ɵɵelementContainerEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", !i0.ɵɵpipeBind1(4, 4, ctx_r0.isInEditMode$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(6, 6, ctx_r0.isInEditMode$));\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isShowRecipes);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.isLikedShow);\n  }\n}\nexport class ProfileComponent {\n  constructor(userService, router, movieService, store) {\n    this.userService = userService;\n    this.router = router;\n    this.movieService = movieService;\n    this.store = store;\n    this.currentUser$ = this.store.select(state => state.auth.profile.currentProfile);\n    // or:\n    // currentUser: IUser;\n    // .pipe(tap(profile => this.currentUser = profile));\n    this.isInEditMode$ = this.store.select(state => state.auth.profile.isInEditMode);\n    this.hasErrorHappened = this.store.select(state => state.auth.profile.errorHappened);\n    this.userMovies = [];\n    this.isShowMovies = false;\n    this.isLikedShow = false;\n    this.likedMovies = [];\n    this.isDisabled = true;\n  }\n  ngOnInit() {\n    this.store.dispatch(profilePageInitialize());\n    this.hasErrorHappened.subscribe(hasError => {\n      if (hasError) {\n        this.router.navigate(['/login']);\n      }\n    });\n    // this.userService.getProfile$().subscribe({\n    //   next: (user) => {\n    //     this.store.dispatch(profileLoaded({ profile: user }));\n    //   },\n    //   error: (error) => {\n    //     this.router.navigate(['/login']);\n    //   }\n    // })\n  }\n\n  enterEditMode(currentUser) {\n    this.store.dispatch(enterEditMode());\n    setTimeout(() => {\n      this.editProfileForm.form.patchValue({\n        email: currentUser.email,\n        username: currentUser.username\n      });\n    });\n  }\n  exitEditMode() {\n    this.store.dispatch(exitEditMode());\n  }\n  showUserMovies(currentUser, action) {\n    if (action == 'show') {\n      // console.log(this.currentUser._id)\n      this.movieService.getAllMoviesByUser$(currentUser._id).subscribe({\n        next: movies => {\n          this.userMovies = movies;\n          this.isShowMovies = !this.isShowMovies;\n          this.isDisabled = !this.isDisabled;\n        },\n        error: error => {\n          console.log(error);\n        }\n      });\n    } else if (action == 'hide') {\n      this.isShowMovies = !this.isShowMovies;\n      this.isDisabled = !this.isDisabled;\n    }\n  }\n  updateProfile() {\n    // console.log(this.editProfileForm.value);\n    this.store.dispatch(updateProfileStarted({\n      user: {\n        username: this.editProfileForm.value.username,\n        email: this.editProfileForm.value.email\n      }\n    }));\n    this.store.dispatch(exitEditMode());\n  }\n  showLikedByUserMovies(currentUser, action) {\n    if (action == 'show') {\n      this.movieService.getAllLikedByUser$(currentUser._id).subscribe({\n        next: movies => {\n          console.log(movies);\n          this.likedMovies = movies;\n          this.isLikedShow = !this.isLikedShow;\n          this.isDisabled = !this.isDisabled;\n        },\n        error: error => {\n          console.log(error);\n        }\n      });\n    } else if (action == 'hide') {\n      this.isLikedShow = !this.isLikedShow;\n      this.isDisabled = !this.isDisabled;\n    }\n  }\n}\nProfileComponent.ɵfac = function ProfileComponent_Factory(t) {\n  return new (t || ProfileComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MovieService), i0.ɵɵdirectiveInject(i4.Store));\n};\nProfileComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: ProfileComponent,\n  selectors: [[\"app-profile\"]],\n  viewQuery: function ProfileComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n    if (rf & 2) {\n      let _t;\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.editProfileForm = _t.first);\n    }\n  },\n  decls: 2,\n  vars: 3,\n  consts: [[4, \"ngIf\"], [1, \"container\", \"mt-3\", \"pb-3\", \"d-flex\", \"justify-content-center\"], [1, \"card\", \"p-3\"], [1, \"d-flex\", \"align-items-center\"], [1, \"image\"], [\"src\", \"https://cdn.pixabay.com/photo/2017/08/03/21/48/drinks-2578446_960_720.jpg\", \"width\", \"250\", \"height\", \"200\", 1, \"rounded\"], [1, \"ml-3\", \"w-100\"], [1, \"mb-0\", \"mt-0\"], [1, \"p-2\", \"mt-2\", \"bg-primary\", \"d-flex\", \"justify-content-between\", \"rounded\", \"text-white\", \"stats\"], [1, \"d-flex\", \"flex-column\"], [1, \"articles\"], [1, \"number1\"], [1, \"followers\"], [1, \"number2\"], [1, \"button\", \"mt-2\", \"d-flex\", \"flex-row\", \"align-items-center\"], [1, \"btn\", \"btn-sm\", \"btn-outline-primary\", \"w-100\", \"btnedit\", 3, \"click\"], [\"class\", \"btn btn-sm btn-primary w-100 ml-2\", 3, \"click\", 4, \"ngIf\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", \"w-100\", \"ml-2\", 3, \"click\"], [1, \"container\", \"mt-5\", \"pb-5\", \"d-flex\", \"justify-content-center\"], [\"src\", \"../../../assets/profile.png\", \"width\", \"250\", \"height\", \"200\", 1, \"rounded\"], [3, \"ngSubmit\"], [\"editProfileForm\", \"ngForm\"], [\"type\", \"text\", \"name\", \"username\", \"ngModel\", \"\", \"required\", \"\", \"minlength\", \"5\", \"id\", \"username\"], [\"username\", \"ngModel\"], [\"class\", \"error\", 4, \"ngIf\"], [\"type\", \"email\", \"name\", \"email\", \"id\", \"email\", \"ngModel\", \"\", \"required\", \"\", \"email\", \"\"], [\"email\", \"ngModel\"], [1, \"btn\", \"btn-sm\", \"btn-outline-primary\", \"w-100\", 3, \"click\"], [1, \"btn\", \"btn-sm\", \"btn-primary\", \"w-100\", \"ml-2\", 3, \"disabled\"], [1, \"error\"], [1, \"pb-5\"], [4, \"ngFor\", \"ngForOf\"], [1, \"emptyarray\"], [1, \"container\", \"mt-2\"], [1, \"d-flex\", \"flex-column\", \"mt-1\"], [1, \"btn\", \"btn-sm\", \"btn-outline-primary\", 3, \"routerLink\"]],\n  template: function ProfileComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵtemplate(0, ProfileComponent_ng_container_0_Template, 9, 8, \"ng-container\", 0);\n      i0.ɵɵpipe(1, \"async\");\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"ngIf\", i0.ɵɵpipeBind1(1, 1, ctx.currentUser$));\n    }\n  },\n  dependencies: [i5.NgForOf, i5.NgIf, i2.RouterLink, i6.ɵNgNoValidate, i6.DefaultValueAccessor, i6.NgControlStatus, i6.NgControlStatusGroup, i6.RequiredValidator, i6.MinLengthValidator, i6.EmailValidator, i6.NgModel, i6.NgForm, i5.AsyncPipe],\n  styles: [\"[_nghost-%COMP%] {\\n     width: 100%; \\n     height: 67vh;\\n}\\n\\n.profile[_ngcontent-%COMP%] {\\n    width: 100%;\\n    max-width: 500px;\\n    margin: 70px auto;\\n    padding: 10px;\\n    border: 4px solid rgb(22, 43, 42);  \\n    border-radius: 8px;\\n    font-family: \\\"Helvetica Neue\\\", Helvetica, Arial, sans-serif;\\n    color: rgb(68, 68, 68);\\n    background-color: hsla(0, 0%, 94.1%, .8);\\n    box-shadow: 0 0 1em 0 #000;\\n    text-align: center;\\n}\\n\\n.profile[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%] {\\n    text-decoration: underline;\\n    color: rgb(22, 43, 42);  \\n}\\n\\n.profile[_ngcontent-%COMP%]   img[_ngcontent-%COMP%] {\\n    width: 7em;\\n    height: 7em;\\n    margin: auto;\\n    display: block;\\n}\\n\\n.flex[_ngcontent-%COMP%] {\\n    display: flex;\\n}\\n\\n.flex[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:first-child {\\n    width: 35%;\\n    text-align: right;\\n    margin: .5em;\\n}\\n\\n.flex[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child {\\n    width: 55%;\\n    text-align: left;\\n    margin: .5em;\\n    font-weight: bold;\\n}\\n\\n.profile[_ngcontent-%COMP%]   button[_ngcontent-%COMP%] {\\n    color: white;\\n    border: none;\\n    border-radius: 0.3em;\\n    padding: 0.6em 1.2em;\\n    outline: none;\\n}\\n\\n.flex[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%], .flex[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%] {\\n    width: 55%;\\n    text-align: left;\\n    margin: .5em;\\n}\\n\\n.flex[_ngcontent-%COMP%]    > div[_ngcontent-%COMP%]    > input[_ngcontent-%COMP%] {\\n    width: 77%;\\n}\\n\\n.flex[_ngcontent-%COMP%]   select[_ngcontent-%COMP%] {\\n    padding: 0.17em 0;\\n}\\n\\n.red-button[_ngcontent-%COMP%] {\\n    background-color: red;\\n}\\n\\n.green-button[_ngcontent-%COMP%] {\\n    background-color: green;\\n}\\n\\n.input-error[_ngcontent-%COMP%] {\\n    border-left: 3px solid red;\\n}\\n/*# sourceURL=webpack://./src/app/auth/profile/profile.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvYXV0aC9wcm9maWxlL3Byb2ZpbGUuY29tcG9uZW50LmNzcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtLQUNLLFdBQVc7S0FDWCxZQUFZO0FBQ2pCOztBQUVBO0lBQ0ksV0FBVztJQUNYLGdCQUFnQjtJQUNoQixpQkFBaUI7SUFDakIsYUFBYTtJQUNiLGlDQUFpQztJQUNqQyxrQkFBa0I7SUFDbEIsMkRBQTJEO0lBQzNELHNCQUFzQjtJQUN0Qix3Q0FBd0M7SUFDeEMsMEJBQTBCO0lBQzFCLGtCQUFrQjtBQUN0Qjs7QUFFQTtJQUNJLDBCQUEwQjtJQUMxQixzQkFBc0I7QUFDMUI7O0FBRUE7SUFDSSxVQUFVO0lBQ1YsV0FBVztJQUNYLFlBQVk7SUFDWixjQUFjO0FBQ2xCOztBQUVBO0lBQ0ksYUFBYTtBQUNqQjs7QUFFQTtJQUNJLFVBQVU7SUFDVixpQkFBaUI7SUFDakIsWUFBWTtBQUNoQjs7QUFFQTtJQUNJLFVBQVU7SUFDVixnQkFBZ0I7SUFDaEIsWUFBWTtJQUNaLGlCQUFpQjtBQUNyQjs7QUFFQTtJQUNJLFlBQVk7SUFDWixZQUFZO0lBQ1osb0JBQW9CO0lBQ3BCLG9CQUFvQjtJQUNwQixhQUFhO0FBQ2pCOztBQUVBO0lBQ0ksVUFBVTtJQUNWLGdCQUFnQjtJQUNoQixZQUFZO0FBQ2hCOztBQUVBO0lBQ0ksVUFBVTtBQUNkOztBQUVBO0lBQ0ksaUJBQWlCO0FBQ3JCOztBQUVBO0lBQ0kscUJBQXFCO0FBQ3pCOztBQUVBO0lBQ0ksdUJBQXVCO0FBQzNCOztBQUVBO0lBQ0ksMEJBQTBCO0FBQzlCIiwic291cmNlc0NvbnRlbnQiOlsiOmhvc3Qge1xuICAgICB3aWR0aDogMTAwJTsgXG4gICAgIGhlaWdodDogNjd2aDtcbn1cblxuLnByb2ZpbGUge1xuICAgIHdpZHRoOiAxMDAlO1xuICAgIG1heC13aWR0aDogNTAwcHg7XG4gICAgbWFyZ2luOiA3MHB4IGF1dG87XG4gICAgcGFkZGluZzogMTBweDtcbiAgICBib3JkZXI6IDRweCBzb2xpZCByZ2IoMjIsIDQzLCA0Mik7ICBcbiAgICBib3JkZXItcmFkaXVzOiA4cHg7XG4gICAgZm9udC1mYW1pbHk6IFwiSGVsdmV0aWNhIE5ldWVcIiwgSGVsdmV0aWNhLCBBcmlhbCwgc2Fucy1zZXJpZjtcbiAgICBjb2xvcjogcmdiKDY4LCA2OCwgNjgpO1xuICAgIGJhY2tncm91bmQtY29sb3I6IGhzbGEoMCwgMCUsIDk0LjElLCAuOCk7XG4gICAgYm94LXNoYWRvdzogMCAwIDFlbSAwICMwMDA7XG4gICAgdGV4dC1hbGlnbjogY2VudGVyO1xufVxuXG4ucHJvZmlsZSBoMyB7XG4gICAgdGV4dC1kZWNvcmF0aW9uOiB1bmRlcmxpbmU7XG4gICAgY29sb3I6IHJnYigyMiwgNDMsIDQyKTsgIFxufVxuXG4ucHJvZmlsZSBpbWcge1xuICAgIHdpZHRoOiA3ZW07XG4gICAgaGVpZ2h0OiA3ZW07XG4gICAgbWFyZ2luOiBhdXRvO1xuICAgIGRpc3BsYXk6IGJsb2NrO1xufVxuXG4uZmxleCB7XG4gICAgZGlzcGxheTogZmxleDtcbn1cblxuLmZsZXggcDpmaXJzdC1jaGlsZCB7XG4gICAgd2lkdGg6IDM1JTtcbiAgICB0ZXh0LWFsaWduOiByaWdodDtcbiAgICBtYXJnaW46IC41ZW07XG59XG5cbi5mbGV4IHA6bGFzdC1jaGlsZCB7XG4gICAgd2lkdGg6IDU1JTtcbiAgICB0ZXh0LWFsaWduOiBsZWZ0O1xuICAgIG1hcmdpbjogLjVlbTtcbiAgICBmb250LXdlaWdodDogYm9sZDtcbn1cblxuLnByb2ZpbGUgYnV0dG9uIHtcbiAgICBjb2xvcjogd2hpdGU7XG4gICAgYm9yZGVyOiBub25lO1xuICAgIGJvcmRlci1yYWRpdXM6IDAuM2VtO1xuICAgIHBhZGRpbmc6IDAuNmVtIDEuMmVtO1xuICAgIG91dGxpbmU6IG5vbmU7XG59XG5cbi5mbGV4ID4gaW5wdXQsIC5mbGV4ID4gZGl2IHtcbiAgICB3aWR0aDogNTUlO1xuICAgIHRleHQtYWxpZ246IGxlZnQ7XG4gICAgbWFyZ2luOiAuNWVtO1xufVxuXG4uZmxleCA+IGRpdiA+IGlucHV0IHtcbiAgICB3aWR0aDogNzclO1xufVxuXG4uZmxleCBzZWxlY3Qge1xuICAgIHBhZGRpbmc6IDAuMTdlbSAwO1xufVxuXG4ucmVkLWJ1dHRvbiB7XG4gICAgYmFja2dyb3VuZC1jb2xvcjogcmVkO1xufVxuXG4uZ3JlZW4tYnV0dG9uIHtcbiAgICBiYWNrZ3JvdW5kLWNvbG9yOiBncmVlbjtcbn1cblxuLmlucHV0LWVycm9yIHtcbiAgICBib3JkZXItbGVmdDogM3B4IHNvbGlkIHJlZDtcbn0iXSwic291cmNlUm9vdCI6IiJ9 */\"],\n  data: {\n    animation: [trigger('itemAnimation', [transition('* => *', [query('div', style({\n      transform: 'translateX(-100%)'\n    })), query('div', stagger('100ms', [animate('300ms', style({\n      transform: 'translateX(0)'\n    }))]))])])]\n  }\n});","map":{"version":3,"mappings":"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","names":["enterEditMode","exitEditMode","profilePageInitialize","updateProfileStarted","trigger","style","animate","transition","query","stagger","i0","ProfileComponent","constructor","userService","router","movieService","store","select","state","auth","profile","currentProfile","isInEditMode","errorHappened","ngOnInit","dispatch","hasErrorHappened","subscribe","hasError","navigate","currentUser","setTimeout","editProfileForm","form","patchValue","email","username","showUserMovies","action","getAllMoviesByUser$","_id","next","movies","userMovies","isShowMovies","isDisabled","error","console","log","updateProfile","user","value","showLikedByUserMovies","getAllLikedByUser$","likedMovies","isLikedShow","selectors","viewQuery","transform"],"sourceRoot":"","sources":["D:\\Softuni\\softUni-Angular\\exam-project\\src\\app\\auth\\profile\\profile.component.ts","D:\\Softuni\\softUni-Angular\\exam-project\\src\\app\\auth\\profile\\profile.component.html"],"sourcesContent":["import { Component, OnInit, ViewChild } from '@angular/core';\nimport { NgForm } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Store } from '@ngrx/store';\nimport { Observable, tap } from 'rxjs';\nimport { IMovie, IUser } from 'src/app/core/interfaces';\nimport { MovieService } from 'src/app/core/movie.service';\nimport { UserService } from 'src/app/core/user.service';\nimport { IAuthModuleState } from '../+store';\nimport { enterEditMode, exitEditMode, profilePageInitialize, updateProfileStarted } from '../+store/actions';\nimport { trigger, style, animate, transition, query, stagger } from '@angular/animations'\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.css'],\n  animations: [\n    trigger('itemAnimation', [\n      transition('* => *', [\n        query('div', style({ transform: 'translateX(-100%)' })),\n        query('div',\n          stagger('100ms', [\n            animate('300ms', style({ transform: 'translateX(0)' }))\n          ]))\n      ])\n    ])\n  ]\n})\nexport class ProfileComponent implements OnInit {\n\n  @ViewChild('editProfileForm') editProfileForm: NgForm;\n\n  currentUser$: Observable<IUser> = this.store.select(state => state.auth.profile.currentProfile)\n  // or:\n  // currentUser: IUser;\n  // .pipe(tap(profile => this.currentUser = profile));\n\n  isInEditMode$: Observable<boolean> = this.store.select(state => state.auth.profile.isInEditMode);\n\n  hasErrorHappened: Observable<boolean> = this.store.select(state => state.auth.profile.errorHappened);\n\n  userMovies: IMovie[] = [];\n\n  isShowMovies: boolean = false;\n\n  isLikedShow: boolean = false;\n  likedMovies: IMovie[] = [];\n\n  isDisabled: boolean = true;\n\n  constructor(\n    private userService: UserService,\n    private router: Router,\n    private movieService: MovieService,\n    private store: Store<IAuthModuleState>\n  ) { }\n\n\n  ngOnInit(): void {\n    this.store.dispatch(profilePageInitialize());\n\n    this.hasErrorHappened.subscribe((hasError) => {\n      if (hasError) {\n        this.router.navigate(['/login']);\n      }\n    })\n\n    // this.userService.getProfile$().subscribe({\n    //   next: (user) => {\n    //     this.store.dispatch(profileLoaded({ profile: user }));\n    //   },\n    //   error: (error) => {\n    //     this.router.navigate(['/login']);\n    //   }\n    // })\n  }\n\n  enterEditMode(currentUser: IUser): void {\n    this.store.dispatch(enterEditMode());\n\n    setTimeout(() => {\n      this.editProfileForm.form.patchValue({\n        email: currentUser.email,\n        username: currentUser.username\n      })\n    });\n  }\n\n  exitEditMode(): void {\n    this.store.dispatch(exitEditMode());\n  }\n\n  showUserMovies(currentUser: IUser, action: string) {\n\n    if (action == 'show') {\n      // console.log(this.currentUser._id)\n      this.movieService.getAllMoviesByUser$(currentUser._id).subscribe({\n        next: (movies) => {\n         \n          this.userMovies = movies;\n          this.isShowMovies = !this.isShowMovies;\n          this.isDisabled = !this.isDisabled;\n        },\n        error: (error) => {\n          console.log(error);\n        }\n      })\n    } else if (action == 'hide') {\n      this.isShowMovies = !this.isShowMovies;\n      this.isDisabled = !this.isDisabled;\n    }\n  }\n\n  updateProfile(): void {\n    // console.log(this.editProfileForm.value);\n\n    this.store.dispatch(updateProfileStarted({\n      user: {\n        username: this.editProfileForm.value.username,\n        email: this.editProfileForm.value.email\n      }\n    }));\n\n    this.store.dispatch(exitEditMode());\n  }\n\n  showLikedByUserMovies(currentUser: IUser, action: string) {\n    if (action == 'show') {\n      this.movieService.getAllLikedByUser$(currentUser._id).subscribe({\n        next: (movies) => {\n          console.log(movies)\n          this.likedMovies = movies;\n          this.isLikedShow = !this.isLikedShow;\n          this.isDisabled = !this.isDisabled;\n        },\n        error: (error) => {\n          console.log(error);\n        }\n      })\n    } else if (action == 'hide') {\n      this.isLikedShow = !this.isLikedShow;\n      this.isDisabled = !this.isDisabled;\n    }\n  }\n}","<ng-container *ngIf=\"(currentUser$ | async) as currentUser\">\n    <h4>User Info:</h4>\n\n    <ng-container *ngIf=\"!(isInEditMode$ | async )\">\n        <div class=\"container mt-3 pb-3 d-flex justify-content-center\">\n            <div class=\"card p-3\">\n                <div class=\"d-flex align-items-center\">\n                    <div class=\"image\"> <img\n                            src=\"https://cdn.pixabay.com/photo/2017/08/03/21/48/drinks-2578446_960_720.jpg\"\n                            class=\"rounded\" width=\"250\" height=\"200\"> </div>\n                    <div class=\"ml-3 w-100\">\n                        <h5 class=\"mb-0 mt-0\"><strong>Username: </strong></h5> <span>{{currentUser.username}}</span>\n                        <h5 class=\"mb-0 mt-0\"><strong>Email: </strong></h5><span>{{currentUser.email}}</span>\n                        <div class=\"p-2 mt-2 bg-primary d-flex justify-content-between rounded text-white stats\">\n                            <div class=\"d-flex flex-column\"> <span class=\"articles\">Recipes</span> <span\n                                    class=\"number1\">{{currentUser.recipes.length}}</span> </div>\n                            <div class=\"d-flex flex-column\"> <span class=\"followers\">Comments</span> <span\n                                    class=\"number2\">{{currentUser.comments.length}}</span> </div>\n                        </div>\n                        <div class=\"button mt-2 d-flex flex-row align-items-center\">\n                            <button (click)=\"enterEditMode(currentUser)\"\n                                class=\"btn btn-sm btn-outline-primary w-100 btnedit\">Edit</button>\n                            <button *ngIf=\"!isShowRecipes\" (click)=\"showUserRecipes(currentUser, 'show')\"\n                                class=\"btn btn-sm btn-primary w-100 ml-2\">\n                                My recipes</button>\n                            <button *ngIf=\"isShowRecipes\" (click)=\"showUserRecipes(currentUser, 'hide')\"\n                                class=\"btn btn-sm btn-primary w-100 ml-2\">\n                                Hide recipes</button>\n\n                            <!-- *ngIf=\"isLikedShow\" -->\n                            <button *ngIf=\"!isLikedShow\" (click)=\"showLikedByUserRecipes(currentUser, 'show')\"\n                                class=\"btn btn-sm btn-primary w-100 ml-2\">\n                                Liked recipes</button>\n                            <button *ngIf=\"isLikedShow\" (click)=\"showLikedByUserRecipes(currentUser, 'hide')\"\n                                class=\"btn btn-sm btn-primary w-100 ml-2\">\n                                Hide recipes</button>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"(isInEditMode$ | async )\">\n        <div class=\"container mt-5 pb-5 d-flex justify-content-center\">\n            <div class=\"card p-3\">\n                <div class=\"d-flex align-items-center\">\n                    <div class=\"image\"> <img\n                            src=\"../../../assets/profile.png\"\n                            class=\"rounded\" width=\"250\" height=\"200\"> </div>\n                    <div class=\"ml-3 w-100\">\n                        <form #editProfileForm=\"ngForm\" (ngSubmit)=\"updateProfile()\">\n                            <h5 class=\"mb-0 mt-0\"><strong>Username: </strong></h5>\n                            <input #username=\"ngModel\" type=\"text\" name=\"username\" ngModel required minlength=\"5\"\n                                id=\"username\" [class.input-error]=\"username.touched && username.invalid\">\n                            <!-- Validation -->\n                            <p *ngIf=\"editProfileForm.controls['username'].hasError('required')\" class=\"error\">\n                                Username is required!\n                            </p>\n                            <p *ngIf=\"editProfileForm.controls['username'].hasError('minlength')\" class=\"error\">\n                                Username must be at least 5 characters!\n                            </p>\n\n                            <h5 class=\"mb-0 mt-0\"><strong>Email: </strong></h5>\n                            <input #email=\"ngModel\" [class.input-error]=\"email.touched && email.invalid\" type=\"email\"\n                                name=\"email\" id=\"email\" ngModel required email>\n                            <!-- Validation -->\n                            <p *ngIf=\"editProfileForm.controls['email'].hasError('required')\" class=\"error\">\n                                Email is required!\n                            </p>\n                            <p *ngIf=\"editProfileForm.controls['email'].hasError('email')\" class=\"error\">\n                                Email is not valid!\n                            </p>\n\n                            <div class=\"p-2 mt-2 bg-primary d-flex justify-content-between rounded text-white stats\">\n                                <div class=\"d-flex flex-column\"> <span class=\"articles\">Recipes</span> <span\n                                        class=\"number1\">{{currentUser.recipes.length}}</span> </div>\n                                <div class=\"d-flex flex-column\"> <span class=\"followers\">Comments</span> <span\n                                        class=\"number2\">{{currentUser.comments.length}}</span> </div>\n                            </div>\n                            <div class=\"button mt-2 d-flex flex-row align-items-center\">\n                                <button (click)=\"exitEditMode()\"\n                                    class=\"btn btn-sm btn-outline-primary w-100\">Cancel</button>\n                                <button [disabled]=\"editProfileForm.invalid\" class=\"btn btn-sm btn-primary w-100 ml-2\">\n                                    Save</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"isShowRecipes\">\n        <h4>My Recipes:</h4>\n\n        <div *ngIf=\"userRecipes.length == 0\">\n            <p class=\"emptyarray\"><strong> You don't have any recipes </strong></p>\n        </div>\n\n        <div [@.disabled]=\"isDisabled\">\n            <div class=\"pb-5\" [@itemAnimation]=\"userRecipes.length\">\n                <div *ngFor=\"let recipe of userRecipes\">\n                    <div class=\"container mt-2\">\n                        <div class=\"p-2 mt-2 bg-primary d-flex justify-content-between rounded text-white stats\">\n                            <div class=\"d-flex flex-column\"> <span class=\"articles\">Recipe:</span> <span\n                                    class=\"number1\">{{recipe.recipeName}}</span> </div>\n                            <div class=\"d-flex flex-column mt-1\"> <button class=\"btn btn-sm btn-outline-primary\"\n                                    [routerLink]=\"['/recipes', recipe._id]\">Details</button> </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n\n    <ng-container *ngIf=\"isLikedShow\">\n        <h4>Liked Recipes:</h4>\n        <div [@.disabled]=\"isDisabled\">\n            <div class=\"pb-5\" [@itemAnimation]=\"userRecipes.length\">\n                <div *ngFor=\"let recipe of likedRecipes\">\n                    <div class=\"container mt-2\">\n                        <div class=\"p-2 mt-2 bg-primary d-flex justify-content-between rounded text-white stats\">\n                            <div class=\"d-flex flex-column\"> <span class=\"articles\">Recipe:</span> <span\n                                    class=\"number1\">{{recipe.recipeName}}</span> </div>\n                            <div class=\"d-flex flex-column mt-1\"> <button class=\"btn btn-sm btn-outline-primary\"\n                                    [routerLink]=\"['/recipes', recipe._id]\">Details</button> </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </ng-container>\n\n</ng-container>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}