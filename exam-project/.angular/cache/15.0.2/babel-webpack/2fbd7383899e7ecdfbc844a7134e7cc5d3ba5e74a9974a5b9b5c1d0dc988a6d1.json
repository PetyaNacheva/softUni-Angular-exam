{"ast":null,"code":"import { MessageType } from 'src/app/core/message-bus.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/core/movie.service\";\nimport * as i4 from \"src/app/core/message-bus.service\";\nimport * as i5 from \"@angular/common\";\nimport * as i6 from \"@angular/material/form-field\";\nimport * as i7 from \"@angular/material/input\";\nfunction MoviesNewPageComponent_mat_error_8_strong_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\");\n    i0.ɵɵtext(1, \" is required! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MoviesNewPageComponent_mat_error_8_strong_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\");\n    i0.ɵɵtext(1, \" must be at least 3 characters! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MoviesNewPageComponent_mat_error_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Movie Name \");\n    i0.ɵɵtemplate(2, MoviesNewPageComponent_mat_error_8_strong_2_Template, 2, 0, \"strong\", 4);\n    i0.ɵɵtemplate(3, MoviesNewPageComponent_mat_error_8_strong_3_Template, 2, 0, \"strong\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.movieFormGroup.controls[\"movieName\"].hasError(\"required\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r0.movieFormGroup.controls[\"movieName\"].hasError(\"required\") && ctx_r0.movieFormGroup.controls[\"movieName\"].hasError(\"minlength\"));\n  }\n}\nfunction MoviesNewPageComponent_mat_error_13_strong_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\");\n    i0.ɵɵtext(1, \" is required! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MoviesNewPageComponent_mat_error_13_strong_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\");\n    i0.ɵɵtext(1, \" must be a valid address! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MoviesNewPageComponent_mat_error_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Image Link \");\n    i0.ɵɵtemplate(2, MoviesNewPageComponent_mat_error_13_strong_2_Template, 2, 0, \"strong\", 4);\n    i0.ɵɵtemplate(3, MoviesNewPageComponent_mat_error_13_strong_3_Template, 2, 0, \"strong\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r1.movieFormGroup.controls[\"imgUrl\"].hasError(\"required\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r1.movieFormGroup.controls[\"imgUrl\"].hasError(\"required\") && ctx_r1.movieFormGroup.controls[\"imgUrl\"].hasError(\"urlV\"));\n  }\n}\nfunction MoviesNewPageComponent_mat_error_19_strong_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\");\n    i0.ɵɵtext(1, \" is required! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MoviesNewPageComponent_mat_error_19_strong_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\");\n    i0.ɵɵtext(1, \" must be at least 10 characters! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MoviesNewPageComponent_mat_error_19_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Description \");\n    i0.ɵɵtemplate(2, MoviesNewPageComponent_mat_error_19_strong_2_Template, 2, 0, \"strong\", 4);\n    i0.ɵɵtemplate(3, MoviesNewPageComponent_mat_error_19_strong_3_Template, 2, 0, \"strong\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.movieFormGroup.controls[\"description\"].hasError(\"required\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r2.movieFormGroup.controls[\"description\"].hasError(\"required\") && ctx_r2.movieFormGroup.controls[\"description\"].hasError(\"minlength\"));\n  }\n}\nfunction MoviesNewPageComponent_mat_error_25_strong_2_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\");\n    i0.ɵɵtext(1, \" is required! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MoviesNewPageComponent_mat_error_25_strong_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\");\n    i0.ɵɵtext(1, \" must be valid! Write ingredients separated with comma and new line! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MoviesNewPageComponent_mat_error_25_strong_4_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"strong\");\n    i0.ɵɵtext(1, \" must be at least two! \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction MoviesNewPageComponent_mat_error_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"mat-error\");\n    i0.ɵɵtext(1, \" Ingredients \");\n    i0.ɵɵtemplate(2, MoviesNewPageComponent_mat_error_25_strong_2_Template, 2, 0, \"strong\", 4);\n    i0.ɵɵtemplate(3, MoviesNewPageComponent_mat_error_25_strong_3_Template, 2, 0, \"strong\", 4);\n    i0.ɵɵtemplate(4, MoviesNewPageComponent_mat_error_25_strong_4_Template, 2, 0, \"strong\", 4);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r3 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.movieFormGroup.controls[\"ingredients\"].hasError(\"required\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.movieFormGroup.controls[\"ingredients\"].hasError(\"required\") && ctx_r3.movieFormGroup.controls[\"ingredients\"].hasError(\"ingredients\"));\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", !ctx_r3.movieFormGroup.controls[\"ingredients\"].hasError(\"required\") && ctx_r3.movieFormGroup.controls[\"ingredients\"].hasError(\"ingredientsLength\"));\n  }\n}\n// import { ingredientsValidator, urlValidator } from '../utils';\nexport class MoviesNewPageComponent {\n  constructor(formBuilder, router, movieService, messageBus) {\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.movieService = movieService;\n    this.messageBus = messageBus;\n    this.movieFormGroup = this.formBuilder.group({\n      // 'recipeName': new FormControl('', [Validators.required, Validators.minLength(3)]),\n      // 'imgUrl': new FormControl('', [Validators.required, urlValidator]),\n      // 'description': new FormControl('', [Validators.required, Validators.minLength(10)]),\n      // 'ingredients': new FormControl('', [Validators.required, ingredientsValidator])\n    });\n  }\n  ngOnInit() {\n    // console.log(this.makeUpdate)\n    // console.log(this.recipeToUpdate)\n    if (this.makeUpdate) {\n      this.formName = 'Edit Movie';\n      this.formBtnName = 'Save';\n      //   this.recipeFormGroup.controls['recipeName'].setValue(this.recipeToUpdate.recipeName);\n      //   this.recipeFormGroup.controls['imgUrl'].setValue(this.recipeToUpdate.imgUrl);\n      //   this.recipeFormGroup.controls['description'].setValue(this.recipeToUpdate.description);\n      //   this.recipeFormGroup.controls['ingredients'].setValue(this.recipeToUpdate.ingredients.join(',\\n'));\n    } else {\n      this.formName = 'Add New Movie';\n      this.formBtnName = 'Add Movie';\n    }\n  }\n  handleCreateMovie() {\n    // Transform ingridients to array\n    // if (this.recipeFormGroup.value.ingredients.includes(',\\n')) {\n    //   this.recipeFormGroup.value.ingredients = this.recipeFormGroup.value.ingredients.split(',\\n');\n    // }\n    // this.recipeFormGroup.value.recipeName = this.recipeFormGroup.value.recipeName.trim();\n    // this.recipeFormGroup.value.description = this.recipeFormGroup.value.description.trim();\n    // this.recipeFormGroup.value.imgUrl = this.recipeFormGroup.value.imgUrl.trim();\n    // Editing mode\n    if (this.makeUpdate) {\n      // console.log('update');\n      // console.log(this.recipeFormGroup.value);\n      this.movieService.updateMovie$(this.movieToUpdate._id, this.movieFormGroup.value).subscribe({\n        next: movie => {\n          // console.log(recipe._id);\n          this.router.navigateByUrl(`/RefreshComponent`, {\n            skipLocationChange: true\n          }).then(() => {\n            this.router.navigate(['/movies', movie._id]);\n          });\n          this.messageBus.notifyForMessage({\n            text: 'User successfully updated movie!',\n            type: MessageType.Success\n          });\n        },\n        error: err => {\n          console.log('Error is ', err.error.message);\n          // this.errorMessage = err.error.message;\n          this.messageBus.notifyForMessage({\n            text: err.error.message,\n            type: MessageType.Error\n          });\n        }\n      });\n      // Creating mode\n    } else {\n      // console.log('form: ', this.recipeFormGroup.value);\n      this.movieService.addMovie$(this.movieFormGroup.value).subscribe({\n        next: movie => {\n          // console.log(recipe);\n          this.router.navigate(['/movies', movie._id]);\n          this.messageBus.notifyForMessage({\n            text: 'User successfully create new movie!',\n            type: MessageType.Success\n          });\n        },\n        error: error => {\n          console.error(error);\n        }\n      });\n    }\n  }\n}\nMoviesNewPageComponent.ɵfac = function MoviesNewPageComponent_Factory(t) {\n  return new (t || MoviesNewPageComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.Router), i0.ɵɵdirectiveInject(i3.MovieService), i0.ɵɵdirectiveInject(i4.MessageBusService));\n};\nMoviesNewPageComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: MoviesNewPageComponent,\n  selectors: [[\"app-movies-new-page\"]],\n  inputs: {\n    makeUpdate: \"makeUpdate\",\n    movieToUpdate: \"movieToUpdate\"\n  },\n  decls: 28,\n  vars: 8,\n  consts: [[1, \"addnew\", 3, \"formGroup\", \"ngSubmit\"], [1, \"parent\"], [\"appearance\", \"outline\"], [\"formControlName\", \"movieName\", \"type\", \"text\", \"matInput\", \"\", \"name\", \"movieName\", \"id\", \"movieName\", \"placeholder\", \"Basic Omelette\"], [4, \"ngIf\"], [\"formControlName\", \"imgUrl\", \"type\", \"text\", \"matInput\", \"\", \"name\", \"imgUrl\", \"id\", \"imgUrl\", \"placeholder\", \"https://...\"], [\"formControlName\", \"description\", \"type\", \"text\", \"matInput\", \"\", \"name\", \"description\", \"id\", \"description\", \"placeholder\", \"Basic Omelette\"], [\"formControlName\", \"ingredients\", \"type\", \"text\", \"matInput\", \"\", \"name\", \"ingredients\", \"id\", \"ingredients\", \"placeholder\", \"ice, 1 lemon, whiskey 50ml, ...\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\"]],\n  template: function MoviesNewPageComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"form\", 0);\n      i0.ɵɵlistener(\"ngSubmit\", function MoviesNewPageComponent_Template_form_ngSubmit_0_listener() {\n        return ctx.handleCreateMovie();\n      });\n      i0.ɵɵelementStart(1, \"div\", 1)(2, \"h2\");\n      i0.ɵɵtext(3);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"mat-form-field\", 2)(5, \"mat-label\");\n      i0.ɵɵtext(6, \"Movie Name\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(7, \"input\", 3);\n      i0.ɵɵtemplate(8, MoviesNewPageComponent_mat_error_8_Template, 4, 2, \"mat-error\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(9, \"mat-form-field\", 2)(10, \"mat-label\");\n      i0.ɵɵtext(11, \"Image Link\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(12, \"input\", 5);\n      i0.ɵɵtemplate(13, MoviesNewPageComponent_mat_error_13_Template, 4, 2, \"mat-error\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"mat-form-field\", 2)(15, \"mat-label\");\n      i0.ɵɵtext(16, \"Description\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"textarea\", 6);\n      i0.ɵɵtext(18, \"            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(19, MoviesNewPageComponent_mat_error_19_Template, 4, 2, \"mat-error\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(20, \"mat-form-field\", 2)(21, \"mat-label\");\n      i0.ɵɵtext(22, \"Ingredients\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(23, \"textarea\", 7);\n      i0.ɵɵtext(24, \"            \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(25, MoviesNewPageComponent_mat_error_25_Template, 5, 3, \"mat-error\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"button\", 8);\n      i0.ɵɵtext(27);\n      i0.ɵɵelementEnd()()();\n    }\n    if (rf & 2) {\n      i0.ɵɵproperty(\"formGroup\", ctx.movieFormGroup);\n      i0.ɵɵadvance(3);\n      i0.ɵɵtextInterpolate(ctx.formName);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.movieFormGroup.controls[\"movieName\"].touched && ctx.movieFormGroup.controls[\"movieName\"].invalid);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngIf\", ctx.movieFormGroup.controls[\"imgUrl\"].touched && ctx.movieFormGroup.controls[\"imgUrl\"].invalid);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.movieFormGroup.controls[\"description\"].touched && ctx.movieFormGroup.controls[\"description\"].invalid);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.movieFormGroup.controls[\"ingredients\"].touched && ctx.movieFormGroup.controls[\"ingredients\"].invalid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"disabled\", ctx.movieFormGroup.invalid || ctx.movieFormGroup.untouched);\n      i0.ɵɵadvance(1);\n      i0.ɵɵtextInterpolate(ctx.formBtnName);\n    }\n  },\n  dependencies: [i5.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName, i6.MatFormField, i6.MatLabel, i6.MatError, i7.MatInput],\n  styles: [\".parent[_ngcontent-%COMP%]{\\r\\n    display: flex;\\r\\n    justify-content: center;\\r\\n    align-items: center;\\r\\n    flex-direction: column;\\r\\n    background-color: #ebf5fe;\\r\\n    padding-top: 20px;\\r\\n    border-radius: 35px 150px;\\r\\n    padding-bottom: 20px;\\r\\n  }\\r\\n  \\r\\n  .addnew[_ngcontent-%COMP%]{\\r\\n    margin-top: 60px;\\r\\n    padding-bottom: 100px;\\r\\n  }\\r\\n  \\r\\n  h2[_ngcontent-%COMP%]{\\r\\n    padding-bottom: 35px;\\r\\n    color: #104c88;\\r\\n  }\\r\\n  \\r\\n  mat-form-field[_ngcontent-%COMP%]{\\r\\n    width: 40%;\\r\\n  }\\r\\n  \\r\\n  button[_ngcontent-%COMP%]{\\r\\n    width: 150px;\\r\\n  }\\n/*# sourceURL=webpack://./src/app/feature/movies/movies-new-page/movies-new-page.component.css */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZS9tb3ZpZXMvbW92aWVzLW5ldy1wYWdlL21vdmllcy1uZXctcGFnZS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0lBQ0ksYUFBYTtJQUNiLHVCQUF1QjtJQUN2QixtQkFBbUI7SUFDbkIsc0JBQXNCO0lBQ3RCLHlCQUF5QjtJQUN6QixpQkFBaUI7SUFDakIseUJBQXlCO0lBQ3pCLG9CQUFvQjtFQUN0Qjs7RUFFQTtJQUNFLGdCQUFnQjtJQUNoQixxQkFBcUI7RUFDdkI7O0VBRUE7SUFDRSxvQkFBb0I7SUFDcEIsY0FBYztFQUNoQjs7RUFFQTtJQUNFLFVBQVU7RUFDWjs7RUFFQTtJQUNFLFlBQVk7RUFDZCIsInNvdXJjZXNDb250ZW50IjpbIi5wYXJlbnR7XHJcbiAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XHJcbiAgICBhbGlnbi1pdGVtczogY2VudGVyO1xyXG4gICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgIGJhY2tncm91bmQtY29sb3I6ICNlYmY1ZmU7XHJcbiAgICBwYWRkaW5nLXRvcDogMjBweDtcclxuICAgIGJvcmRlci1yYWRpdXM6IDM1cHggMTUwcHg7XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogMjBweDtcclxuICB9XHJcbiAgXHJcbiAgLmFkZG5ld3tcclxuICAgIG1hcmdpbi10b3A6IDYwcHg7XHJcbiAgICBwYWRkaW5nLWJvdHRvbTogMTAwcHg7XHJcbiAgfVxyXG4gIFxyXG4gIGgye1xyXG4gICAgcGFkZGluZy1ib3R0b206IDM1cHg7XHJcbiAgICBjb2xvcjogIzEwNGM4ODtcclxuICB9XHJcbiAgXHJcbiAgbWF0LWZvcm0tZmllbGR7XHJcbiAgICB3aWR0aDogNDAlO1xyXG4gIH1cclxuICBcclxuICBidXR0b257XHJcbiAgICB3aWR0aDogMTUwcHg7XHJcbiAgfSJdLCJzb3VyY2VSb290IjoiIn0= */\"]\n});","map":{"version":3,"mappings":"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","names":["MessageType","i0","MoviesNewPageComponent","constructor","formBuilder","router","movieService","messageBus","group","ngOnInit","makeUpdate","formName","formBtnName","handleCreateMovie","updateMovie$","movieToUpdate","_id","movieFormGroup","value","subscribe","next","movie","navigateByUrl","skipLocationChange","then","navigate","notifyForMessage","text","type","Success","error","err","console","log","message","Error","addMovie$","selectors","inputs","decls","vars","consts","template","ctx"],"sourceRoot":"","sources":["D:\\Softuni\\softUni-Angular\\exam-project\\src\\app\\feature\\movies\\movies-new-page\\movies-new-page.component.ts","D:\\Softuni\\softUni-Angular\\exam-project\\src\\app\\feature\\movies\\movies-new-page\\movies-new-page.component.html"],"sourcesContent":["import { Component, Input, OnInit } from '@angular/core';\r\nimport { FormBuilder, FormControl, FormGroup, Validators } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\nimport { IMovie } from 'src/app/core/interfaces';\r\nimport { MessageBusService, MessageType } from 'src/app/core/message-bus.service';\r\nimport { MovieService } from 'src/app/core/movie.service';\r\n// import { ingredientsValidator, urlValidator } from '../utils';\r\n\r\n@Component({\r\n  selector: 'app-movies-new-page',\r\n  templateUrl: './movies-new-page.component.html',\r\n  styleUrls: ['./movies-new-page.component.css']\r\n})\r\nexport class MoviesNewPageComponent implements OnInit {\r\n\r\n  @Input() makeUpdate: boolean;\r\n  @Input() movieToUpdate: IMovie;\r\n\r\n  formName: string;\r\n  formBtnName: string;\r\n\r\n  movieFormGroup: FormGroup = this.formBuilder.group({\r\n    // 'recipeName': new FormControl('', [Validators.required, Validators.minLength(3)]),\r\n    // 'imgUrl': new FormControl('', [Validators.required, urlValidator]),\r\n    // 'description': new FormControl('', [Validators.required, Validators.minLength(10)]),\r\n    // 'ingredients': new FormControl('', [Validators.required, ingredientsValidator])\r\n  })\r\n\r\n  constructor(private formBuilder: FormBuilder,\r\n    private router: Router,\r\n    private movieService: MovieService,\r\n    private messageBus: MessageBusService\r\n  ) { }\r\n\r\n  ngOnInit(): void {\r\n    // console.log(this.makeUpdate)\r\n    // console.log(this.recipeToUpdate)\r\n\r\n    if (this.makeUpdate) {\r\n      this.formName = 'Edit Movie';\r\n      this.formBtnName = 'Save';\r\n    //   this.recipeFormGroup.controls['recipeName'].setValue(this.recipeToUpdate.recipeName);\r\n    //   this.recipeFormGroup.controls['imgUrl'].setValue(this.recipeToUpdate.imgUrl);\r\n    //   this.recipeFormGroup.controls['description'].setValue(this.recipeToUpdate.description);\r\n    //   this.recipeFormGroup.controls['ingredients'].setValue(this.recipeToUpdate.ingredients.join(',\\n'));\r\n    } else {\r\n      this.formName = 'Add New Movie';\r\n      this.formBtnName = 'Add Movie';\r\n    }\r\n  }\r\n\r\n\r\n  handleCreateMovie() {\r\n\r\n    // Transform ingridients to array\r\n    // if (this.recipeFormGroup.value.ingredients.includes(',\\n')) {\r\n    //   this.recipeFormGroup.value.ingredients = this.recipeFormGroup.value.ingredients.split(',\\n');\r\n    // }\r\n    // this.recipeFormGroup.value.recipeName = this.recipeFormGroup.value.recipeName.trim();\r\n    // this.recipeFormGroup.value.description = this.recipeFormGroup.value.description.trim();\r\n    // this.recipeFormGroup.value.imgUrl = this.recipeFormGroup.value.imgUrl.trim();\r\n\r\n    // Editing mode\r\n    if (this.makeUpdate) {\r\n      // console.log('update');\r\n      // console.log(this.recipeFormGroup.value);\r\n\r\n      this.movieService.updateMovie$(this.movieToUpdate._id, this.movieFormGroup.value).subscribe({\r\n        next: movie => {\r\n          // console.log(recipe._id);\r\n          this.router.navigateByUrl(`/RefreshComponent`, { skipLocationChange: true }).then(() => {\r\n            this.router.navigate(['/movies', movie._id]);\r\n          });\r\n\r\n          this.messageBus.notifyForMessage({\r\n            text: 'User successfully updated movie!',\r\n            type: MessageType.Success\r\n          })\r\n        },\r\n        error: (err) => {\r\n          console.log('Error is ', err.error.message)\r\n          // this.errorMessage = err.error.message;\r\n          this.messageBus.notifyForMessage({\r\n            text: err.error.message,\r\n            type: MessageType.Error\r\n          })\r\n        }\r\n      })\r\n\r\n      // Creating mode\r\n    } else {\r\n      // console.log('form: ', this.recipeFormGroup.value);\r\n\r\n      this.movieService.addMovie$(this.movieFormGroup.value).subscribe({\r\n        next: (movie) => {\r\n          // console.log(recipe);\r\n          this.router.navigate(['/movies', movie._id])\r\n\r\n          this.messageBus.notifyForMessage({\r\n            text: 'User successfully create new movie!',\r\n            type: MessageType.Success\r\n          })\r\n        },\r\n        error: (error) => {\r\n          console.error(error);\r\n        }\r\n      })\r\n    }\r\n  }\r\n}","<form class=\"addnew\" [formGroup]=\"movieFormGroup\" (ngSubmit)=\"handleCreateMovie()\">\r\n    <div class=\"parent\">\r\n        <h2>{{formName}}</h2>\r\n\r\n        <mat-form-field appearance=\"outline\">\r\n            <mat-label>Movie Name</mat-label>\r\n            <input formControlName=\"movieName\" type=\"text\" matInput name=\"movieName\" id=\"movieName\"\r\n                placeholder=\"Basic Omelette\" >\r\n\r\n            <mat-error\r\n                *ngIf=\"movieFormGroup.controls['movieName'].touched && movieFormGroup.controls['movieName'].invalid\">\r\n                Movie Name\r\n                <strong *ngIf=\"movieFormGroup.controls['movieName'].hasError('required')\">\r\n                    is required!\r\n                </strong>\r\n                <strong\r\n                    *ngIf=\"!movieFormGroup.controls['movieName'].hasError('required') && movieFormGroup.controls['movieName'].hasError('minlength')\">\r\n                    must be at least 3 characters!\r\n                </strong>\r\n            </mat-error>\r\n        </mat-form-field>\r\n\r\n        <mat-form-field appearance=\"outline\">\r\n            <mat-label>Image Link</mat-label>\r\n            <input formControlName=\"imgUrl\" type=\"text\" matInput name=\"imgUrl\" id=\"imgUrl\" placeholder=\"https://...\">\r\n\r\n            <mat-error *ngIf=\"movieFormGroup.controls['imgUrl'].touched && movieFormGroup.controls['imgUrl'].invalid\">\r\n                Image Link\r\n                <strong *ngIf=\"movieFormGroup.controls['imgUrl'].hasError('required')\">\r\n                    is required!\r\n                </strong>\r\n                <strong\r\n                    *ngIf=\"!movieFormGroup.controls['imgUrl'].hasError('required') && movieFormGroup.controls['imgUrl'].hasError('urlV')\">\r\n                    must be a valid address!\r\n                </strong>\r\n            </mat-error>\r\n        </mat-form-field>\r\n\r\n        <mat-form-field appearance=\"outline\">\r\n            <mat-label>Description</mat-label>\r\n            <textarea formControlName=\"description\" type=\"text\" matInput name=\"description\" id=\"description\"\r\n                placeholder=\"Basic Omelette\">\r\n            </textarea>\r\n            <mat-error\r\n                *ngIf=\"movieFormGroup.controls['description'].touched && movieFormGroup.controls['description'].invalid\">\r\n                Description\r\n                <strong *ngIf=\"movieFormGroup.controls['description'].hasError('required')\">\r\n                    is required!\r\n                </strong>\r\n                <strong\r\n                    *ngIf=\"!movieFormGroup.controls['description'].hasError('required') && movieFormGroup.controls['description'].hasError('minlength')\">\r\n                    must be at least 10 characters!\r\n                </strong>\r\n            </mat-error>\r\n        </mat-form-field>\r\n\r\n        <mat-form-field appearance=\"outline\">\r\n            <mat-label>Ingredients</mat-label>\r\n            <textarea formControlName=\"ingredients\" type=\"text\" matInput name=\"ingredients\" id=\"ingredients\"\r\n                placeholder=\"ice, 1 lemon, whiskey 50ml, ...\">\r\n            </textarea>\r\n            <mat-error\r\n                *ngIf=\"movieFormGroup.controls['ingredients'].touched && movieFormGroup.controls['ingredients'].invalid\">\r\n                Ingredients\r\n                <strong *ngIf=\"movieFormGroup.controls['ingredients'].hasError('required')\">\r\n                    is required!\r\n                </strong>\r\n                <strong\r\n                    *ngIf=\"!movieFormGroup.controls['ingredients'].hasError('required') && movieFormGroup.controls['ingredients'].hasError('ingredients')\">\r\n                    must be valid! Write ingredients separated with comma and new line!\r\n                </strong>\r\n                <strong\r\n                    *ngIf=\"!movieFormGroup.controls['ingredients'].hasError('required') && movieFormGroup.controls['ingredients'].hasError('ingredientsLength')\">\r\n                    must be at least two!\r\n                </strong>\r\n            </mat-error>\r\n        </mat-form-field>\r\n\r\n        <button [disabled]=\"movieFormGroup.invalid || movieFormGroup.untouched\" class=\"btn btn-primary\">{{formBtnName}}</button>\r\n\r\n    </div>\r\n</form>"]},"metadata":{},"sourceType":"module","externalDependencies":[]}